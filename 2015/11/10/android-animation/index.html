<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Android," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="前言学习Android最重要的就是自定义控件了，好看的人性化的控件总是能抓住客户以及使用者的心，所以从网上学习了部分知识，以及通过自己的实践，总结了自定义控件的学习。在Android动画中，总共有两种类型的动画View Animation(视图动画)和Property Animator(属性动画)。其中：

View Animation包括Tween Animation（补间动画）和Frame">
<meta property="og:type" content="article">
<meta property="og:title" content="自定义控件——动画">
<meta property="og:url" content="http://adolph.cc/2015/11/10/android-animation/index.html">
<meta property="og:site_name" content="Magic">
<meta property="og:description" content="前言学习Android最重要的就是自定义控件了，好看的人性化的控件总是能抓住客户以及使用者的心，所以从网上学习了部分知识，以及通过自己的实践，总结了自定义控件的学习。在Android动画中，总共有两种类型的动画View Animation(视图动画)和Property Animator(属性动画)。其中：

View Animation包括Tween Animation（补间动画）和Frame">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702084563420160120104933467.png">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702082067420160120165531838.gif">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702096229820160226223929399.gif">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702094808220160226224343549.gif">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702093773320160227110743594.gif">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702108384320160301085204774.jpg">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702102971920160301085911065.gif">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702101476120160303084028875.gif">
<meta property="og:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702101887320160326102726242.gif">
<meta property="og:updated_time" content="2017-04-06T15:56:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="自定义控件——动画">
<meta name="twitter:description" content="前言学习Android最重要的就是自定义控件了，好看的人性化的控件总是能抓住客户以及使用者的心，所以从网上学习了部分知识，以及通过自己的实践，总结了自定义控件的学习。在Android动画中，总共有两种类型的动画View Animation(视图动画)和Property Animator(属性动画)。其中：

View Animation包括Tween Animation（补间动画）和Frame">
<meta name="twitter:image" content="http://ohtrrgyyd.bkt.clouddn.com/201702084563420160120104933467.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":true,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://adolph.cc/2015/11/10/android-animation/"/>





  <title> 自定义控件——动画 | Magic </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Magic</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://adolph.cc/2015/11/10/android-animation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MagicalRice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://ohtrrgyyd.bkt.clouddn.com/037c5bde749f737e107c8fb8e9321c9d.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Magic">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                自定义控件——动画
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-11-10T21:12:08+08:00">
                2015-11-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <a id="more"></a>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>学习Android最重要的就是自定义控件了，好看的人性化的控件总是能抓住客户以及使用者的心，所以从网上学习了部分知识，以及通过自己的实践，总结了自定义控件的学习。在Android动画中，总共有两种类型的动画View Animation(视图动画)和Property Animator(属性动画)。其中：</p>
<ul>
<li>View Animation包括Tween Animation（补间动画）和Frame Animation(逐帧动画);</li>
<li>Property Animator包括ValueAnimator和ObjectAnimation；</li>
<li>alpha、scale、translate、rotate属于Tween Animation。</li>
</ul>
<p>不同之处：</p>
<ul>
<li>引入时间不同：View Animation是API Level 1就引入的。Property Animation是API Level 11引入的，即Android 3.0才开始有Property Animation相关的API。 </li>
<li>所在包名不同：View Animation在包android.view.animation中。而Property Animation API在包 android.animation中。 </li>
<li>动画类的命名不同：View Animation中动画类取名都叫XXXXAnimation,而在Property Animator中动画类的取名则叫XXXXAnimator</li>
</ul>
<h1 id="一、alpha、scale、translate、rotate、set-Tween-Animation-的xml属性及用法"><a href="#一、alpha、scale、translate、rotate、set-Tween-Animation-的xml属性及用法" class="headerlink" title="一、alpha、scale、translate、rotate、set(Tween Animation)的xml属性及用法"></a>一、alpha、scale、translate、rotate、set(Tween Animation)的xml属性及用法</h1><h3 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h3><p>alpha：渐变透明度动画效果<br>scale：渐变尺寸伸缩动画效果<br>translate：画面转换位置移动动画效果<br>rotate：画面转移旋转动画效果</p>
<p>动作定义的动画文件应当放在res/anim文件夹下，采用R.anim.XXX.xml方式进行访问。</p>
<h3 id="二、scale标签——调节尺寸"><a href="#二、scale标签——调节尺寸" class="headerlink" title="二、scale标签——调节尺寸"></a>二、scale标签——调节尺寸</h3><p>scale是缩放动画</p>
<h5 id="1、自身属性"><a href="#1、自身属性" class="headerlink" title="1、自身属性"></a>1、自身属性</h5><ul>
<li><strong>android:fromXScale</strong> //起始的X方向上相对自身的缩放比例，浮点值，比如1.0代表自身无变化，0.5代表起始时缩小一倍，2.0代表放大一倍;</li>
<li><strong>android:toXScale</strong> //结尾的X方向上相对自身的缩放比例，浮点值;</li>
<li><strong>android:fromYScale</strong> //起始的Y方向上相对自身的缩放比例，浮点值;</li>
<li><strong>android:toYScale</strong> //结尾的Y方向上相对自身的缩放比例，浮点值;</li>
<li><strong>android:pivotX</strong> //缩放起点X轴坐标，可以是数值、百分数、百分数p 三种样式，比如 50、50%、50%p，当为数值时，表示在当前View的左上角，即原点处加上50px，做为起始缩放点；如果是50%，表示在当前控件的左上角加上自己宽度的50%做为起始点；如果是50%p，那么就是表示在当前的左上角加上父控件宽度的50%做为起始点x轴坐标。</li>
<li><strong>android:pivotY</strong> //缩放起点Y轴坐标，取值及意义跟android:pivotX一样。</li>
</ul>
<h5 id="2、从Animation类继承的属性"><a href="#2、从Animation类继承的属性" class="headerlink" title="2、从Animation类继承的属性"></a>2、从Animation类继承的属性</h5><ul>
<li><strong>android:duration</strong> //动画持续时间，以毫秒为单位 </li>
<li><strong>android:fillAfte</strong> //如果设置为true，控件动画结束时，将保持动画最后时的状态</li>
<li><strong>android:fillBefore</strong> //如果设置为true,控件动画结束时，还原到开始动画前的状态</li>
<li><strong>android:fillEnabled</strong> //与android:fillBefore 效果相同，都是在动画结束时，将控件还原到初始化状态</li>
<li><strong>android:repeatCount</strong> //重复次数</li>
<li><strong>android:repeatMode</strong> //重复类型，有reverse和restart两个值，reverse表示倒序回放，restart表示重新放一遍，必须与repeatCount一起使用才能看到效果。因为这里的意义是重复的类型，即回放时的动作.</li>
<li><strong>android:interpolator</strong> //设定插值器，其实就是指定的动作效果，比如弹跳效果等，不在这小节中讲解，后面会单独列出一单讲解。</li>
</ul>
<h3 id="三、alpha标签——调节透明度"><a href="#三、alpha标签——调节透明度" class="headerlink" title="三、alpha标签——调节透明度"></a>三、alpha标签——调节透明度</h3><h5 id="1、自身属性-1"><a href="#1、自身属性-1" class="headerlink" title="1、自身属性"></a>1、自身属性</h5><ul>
<li><strong>android:fromAlpha</strong> //动画开始的透明度，从0.0 –1.0 ，0.0表示全透明，1.0表示完全不透明</li>
<li><strong>android:toAlpha</strong> //动画结束时的透明度，也是从0.0 –1.0 ，0.0表示全透明，1.0表示完全不透明</li>
</ul>
<h3 id="四、rotate标签——旋转"><a href="#四、rotate标签——旋转" class="headerlink" title="四、rotate标签——旋转"></a>四、rotate标签——旋转</h3><h5 id="1、自身属性-2"><a href="#1、自身属性-2" class="headerlink" title="1、自身属性"></a>1、自身属性</h5><ul>
<li><strong>android:fromDegrees</strong> //开始旋转的角度位置，正值代表顺时针方向度数，负值代码逆时针方向度数</li>
<li><strong>android:toDegrees</strong> //结束时旋转到的角度位置，正值代表顺时针方向度数，负值代码逆时针方向度数</li>
<li><strong>android:pivotX</strong> //放起点X轴坐标，可以是数值、百分数、百分数p 三种样式，比如 50、50%、50%p.</li>
<li><strong>android:pivotY</strong> //缩放起点Y轴坐标，可以是数值、百分数、百分数p 三种样式，比如 50、50%、50%p</li>
</ul>
<h3 id="五、translate标签-——-平移"><a href="#五、translate标签-——-平移" class="headerlink" title="五、translate标签 —— 平移"></a>五、translate标签 —— 平移</h3><h5 id="1、自身属性-3"><a href="#1、自身属性-3" class="headerlink" title="1、自身属性"></a>1、自身属性</h5><ul>
<li><strong>android:fromXDelta</strong> //起始点X轴坐标，可以是数值、百分数、百分数p 三种样式，比如 50、50%、50%p</li>
<li><strong>android:fromYDelta</strong> //起始点Y轴坐标，可以是数值、百分数、百分数p 三种样式</li>
<li><strong>android:toXDelta</strong> //结束点X轴坐标</li>
<li><strong>android:toYDelta</strong> //结束点Y轴坐标</li>
</ul>
<h3 id="六、set标签——定义动作合集"><a href="#六、set标签——定义动作合集" class="headerlink" title="六、set标签——定义动作合集"></a>六、set标签——定义动作合集</h3><p>set标签自已是没有属性的，他的属性都是从Animation继承而来，但当它们用于Set标签时，就会对Set标签下的所有子控件都产生作用。</p>
<h3 id="七、示例"><a href="#七、示例" class="headerlink" title="七、示例"></a>七、示例</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"3000"</span>  </div><div class="line">    <span class="attr">android:fillAfter</span>=<span class="string">"true"</span>&gt;  </div><div class="line">      </div><div class="line">  <span class="tag">&lt;<span class="name">alpha</span>   </span></div><div class="line">    <span class="attr">android:fromAlpha</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toAlpha</span>=<span class="string">"1.0"</span>/&gt;  </div><div class="line">    </div><div class="line">  <span class="tag">&lt;<span class="name">scale</span>  </span></div><div class="line">    <span class="attr">android:fromXScale</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toXScale</span>=<span class="string">"1.4"</span>  </div><div class="line">    <span class="attr">android:fromYScale</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toYScale</span>=<span class="string">"1.4"</span>  </div><div class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50%"</span>  </div><div class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50%"</span>/&gt;  </div><div class="line">    </div><div class="line">  <span class="tag">&lt;<span class="name">rotate</span>  </span></div><div class="line">    <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span>  </div><div class="line">    <span class="attr">android:toDegrees</span>=<span class="string">"720"</span>  </div><div class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50%"</span>  </div><div class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50%"</span>/&gt;  </div><div class="line">         </div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="八、使用Animation"><a href="#八、使用Animation" class="headerlink" title="八、使用Animation"></a>八、使用Animation</h3><ol>
<li>通过<code>scaleAnimation = AnimationUtils.loadAnimation(this, R.anim.scaleanim);</code>从XML文件中获取动画</li>
<li>利用<code>startAnimation(animation);</code>将动画传递给指定控件显示。</li>
</ol>
<h1 id="二、Interpolator插值器"><a href="#二、Interpolator插值器" class="headerlink" title="二、Interpolator插值器"></a>二、Interpolator插值器</h1><h3 id="一、概述-1"><a href="#一、概述-1" class="headerlink" title="一、概述"></a>一、概述</h3><p>Interpolator属性是Animation类的一个XML属性，所以alpha、scale、rotate、translate、set都会继承得到这个属性。Interpolator被译为插值器，指定动画如何变化，跟PS里的动作有点类似：随便拿来一张图片，应用一个动作，图片就会指定变化。</p>
<p>Interpolator的系统值有下面几个：  </p>
<ul>
<li>AccelerateDecelerateInterpolator   //在动画开始与介绍的地方速率改变比较慢，在中间的时候加速  </li>
<li>AccelerateInterpolator   //在动画开始的地方速率改变比较慢，然后开始加速  </li>
<li>AnticipateInterpolator   //开始的时候向后然后向前甩  </li>
<li>AnticipateOvershootInterpolator   //开始的时候向后然后向前甩一定值后返回最后的值  </li>
<li>BounceInterpolator   //动画结束的时候弹起  </li>
<li>CycleInterpolator   //动画循环播放特定的次数，速率改变沿着正弦曲线</li>
<li>DecelerateInterpolator   //在动画开始的地方快然后慢</li>
<li>LinearInterpolator   //以常量速率改变</li>
<li>OvershootInterpolator   //向前甩一定值后再回到原来位置</li>
</ul>
<h1 id="三、用代码实现Animation"><a href="#三、用代码实现Animation" class="headerlink" title="三、用代码实现Animation"></a>三、用代码实现Animation</h1><h3 id="1-Animation类是所有动画的基类，它所具有的标签对应的函数："><a href="#1-Animation类是所有动画的基类，它所具有的标签对应的函数：" class="headerlink" title="1.Animation类是所有动画的基类，它所具有的标签对应的函数："></a>1.Animation类是所有动画的基类，它所具有的标签对应的函数：</h3><ul>
<li>android:duration —— setDuration(long)      //动画持续时间，以毫秒为单位</li>
<li>android:fillAfter —— setFillAfter(boolean)   //如果设置为true，控件动画结束时，将保持动画最后时的状态</li>
<li>android:fillBefore —— setFillBefore(boolean)   //如果设置为true,控件动画结束时，还原到开始动画前的状态</li>
<li>android:fillEnabled —— setFillEnabled(boolean)   //与android:fillBefore 效果相同，都是在动画结束时，将控件还原到初始化状态</li>
<li>android:repeatCount —— setRepeatCount(int)   //重复次数</li>
<li>android:repeatMode —— setRepeatMode(int)   //重复类型，有reverse和restart两个值，取值为RESTART或 REVERSE，必须与repeatCount一起使用才能看到效果。因为这里的意义是重复的类型，即回放时的动作。</li>
<li>android:interpolator —— setInterpolator(Interpolator)   //设定插值器，其实就是指定的动作效果，比如弹跳效果等</li>
</ul>
<h3 id="2-ScaleAnimation"><a href="#2-ScaleAnimation" class="headerlink" title="2.ScaleAnimation"></a>2.ScaleAnimation</h3><p>这是scale标签对应的类</p>
<h5 id="构造函数："><a href="#构造函数：" class="headerlink" title="构造函数："></a>构造函数：</h5><ul>
<li><strong>ScaleAnimation(Context context, AttributeSet attrs)</strong>  //从XML文件加载动画，基本用不到</li>
<li><strong>ScaleAnimation(float fromX, float toX, float fromY, float toY)</strong></li>
<li><strong>ScaleAnimation(float fromX, float toX, float fromY, float toY, float pivotX, float pivotY)</strong></li>
<li><strong>ScaleAnimation(float fromX, float toX, float fromY, float toY, int pivotXType, float pivotXValue, int pivotYType, float pivotYValue)</strong></li>
</ul>
<p>第一个构造函数是从本地XML文件加载动画，基本用不到的，我们主要看下面三个构造函数.在标签属性<strong>android:pivotX</strong>中有三种取值，数，百分数，百分数p；体现在构造函数中，就是最后一个构造函数的<strong>pivotXType</strong>,它的取值有三个，<strong>Animation.ABSOLUTE</strong>、<strong>Animation.RELATIVE_TO_SELF</strong>和<strong>Animation.RELATIVE_TO_PARENT</strong>；</p>
<h5 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h5><p>构造的XML代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">scale</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">    <span class="attr">android:fromXScale</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toXScale</span>=<span class="string">"1.4"</span>  </div><div class="line">    <span class="attr">android:fromYScale</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toYScale</span>=<span class="string">"1.4"</span>  </div><div class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50"</span>  </div><div class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50"</span>  </div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"700"</span> /&gt;</div></pre></td></tr></table></figure>
<p>对应的代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">scaleAnim = <span class="keyword">new</span> ScaleAnimation(<span class="number">0.0f</span>,<span class="number">1.4f</span>,<span class="number">0.0f</span>,<span class="number">1.4f</span>,Animation.RELATIVE_TO_SELF,<span class="number">0.5f</span>,Animation.RELATIVE_TO_SELF,<span class="number">0.5f</span>);  </div><div class="line">scaleAnim.setDuration(<span class="number">700</span>);</div></pre></td></tr></table></figure>
<h3 id="3-AlphaAnimation"><a href="#3-AlphaAnimation" class="headerlink" title="3. AlphaAnimation"></a>3. AlphaAnimation</h3><p>这是alpha标签对应的类</p>
<h5 id="构造函数：-1"><a href="#构造函数：-1" class="headerlink" title="构造函数："></a>构造函数：</h5><ul>
<li><strong>AlphaAnimation(Context context, AttributeSet attrs)</strong>   //同样，从本地XML加载动画，基本不用</li>
<li><strong>AlphaAnimation(float fromAlpha, float toAlpha)</strong></li>
</ul>
<h5 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h5><p>构造的XML代码：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">alpha</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">    <span class="attr">android:fromAlpha</span>=<span class="string">"1.0"</span>  </div><div class="line">    <span class="attr">android:toAlpha</span>=<span class="string">"0.1"</span>  </div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"3000"</span>  </div><div class="line">    <span class="attr">android:fillBefore</span>=<span class="string">"true"</span>&gt;  </div><div class="line"><span class="tag">&lt;/<span class="name">alpha</span>&gt;</span></div></pre></td></tr></table></figure>
<p>对应的代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">alphaAnim = <span class="keyword">new</span> AlphaAnimation(<span class="number">1.0f</span>,<span class="number">0.1f</span>);  </div><div class="line">alphaAnim.setDuration(<span class="number">3000</span>);  </div><div class="line">alphaAnim.setFillBefore(<span class="keyword">true</span>);</div></pre></td></tr></table></figure>
<h3 id="4-RotateAnimation"><a href="#4-RotateAnimation" class="headerlink" title="4. RotateAnimation"></a>4. RotateAnimation</h3><p>RotateAnimation类对应Rotate标签</p>
<h5 id="构造函数：-2"><a href="#构造函数：-2" class="headerlink" title="构造函数："></a>构造函数：</h5><ul>
<li><strong>RotateAnimation(Context context, AttributeSet attrs)</strong>   //从本地XML文档加载动画，同样，基本不用</li>
<li><strong>RotateAnimation(float fromDegrees, float toDegrees)</strong></li>
<li><strong>RotateAnimation(float fromDegrees, float toDegrees, float pivotX, float pivotY)</strong></li>
<li><strong>RotateAnimation(float fromDegrees, float toDegrees, int pivotXType, float pivotXValue, int pivotYType, float pivotYValue)</strong></li>
</ul>
<h5 id="示例：-2"><a href="#示例：-2" class="headerlink" title="示例："></a>示例：</h5><p>构造的XML代码：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">rotate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">    <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span>  </div><div class="line">    <span class="attr">android:toDegrees</span>=<span class="string">"-650"</span>  </div><div class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50%"</span>  </div><div class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50%"</span>  </div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"3000"</span>  </div><div class="line">    <span class="attr">android:fillAfter</span>=<span class="string">"true"</span>&gt;  </div><div class="line"><span class="tag">&lt;/<span class="name">rotate</span>&gt;</span></div></pre></td></tr></table></figure>
<p>对应的代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rotateAnim = <span class="keyword">new</span> RotateAnimation(<span class="number">0</span>, -<span class="number">650</span>, Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>, Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);  </div><div class="line">rotateAnim.setDuration(<span class="number">3000</span>);  </div><div class="line">rotateAnim.setFillAfter(<span class="keyword">true</span>);</div></pre></td></tr></table></figure>
<h3 id="5-TranslateAnimation"><a href="#5-TranslateAnimation" class="headerlink" title="5. TranslateAnimation"></a>5. TranslateAnimation</h3><p>TranslateAnimation类对应translate标签</p>
<h5 id="构造函数：-3"><a href="#构造函数：-3" class="headerlink" title="构造函数："></a>构造函数：</h5><ul>
<li><strong>TranslateAnimation(Context context, AttributeSet attrs)</strong>  //同样，基本不用</li>
<li><strong>TranslateAnimation(float fromXDelta, float toXDelta, float fromYDelta, float toYDelta)</strong>   //使用是绝对数值</li>
<li><strong>TranslateAnimation(int fromXType, float fromXValue, int toXType, float toXValue, int fromYType, float fromYValue, int toYType, float toYValue)</strong>   //最理想的状态就是这个构造函数，能够指定每个值的类型。只有这个构造函数可以指定百分数和相对父控件的百分数。</li>
</ul>
<h5 id="示例：-3"><a href="#示例：-3" class="headerlink" title="示例："></a>示例：</h5><p>构造的XML代码：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">translate</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">    <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span>   </div><div class="line">    <span class="attr">android:toXDelta</span>=<span class="string">"-80"</span>  </div><div class="line">    <span class="attr">android:fromYDelta</span>=<span class="string">"0"</span>  </div><div class="line">    <span class="attr">android:toYDelta</span>=<span class="string">"-80"</span>  </div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"2000"</span>  </div><div class="line">    <span class="attr">android:fillBefore</span>=<span class="string">"true"</span>&gt;  </div><div class="line"><span class="tag">&lt;/<span class="name">translate</span>&gt;</span></div></pre></td></tr></table></figure>
<p>对应的代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">translateAnim = <span class="keyword">new</span> TranslateAnimation(Animation.ABSOLUTE, <span class="number">0</span>, Animation.ABSOLUTE, -<span class="number">80</span>,   </div><div class="line">        Animation.ABSOLUTE, <span class="number">0</span>, Animation.ABSOLUTE, -<span class="number">80</span>);  </div><div class="line">translateAnim.setDuration(<span class="number">2000</span>);  </div><div class="line">translateAnim.setFillBefore(<span class="keyword">true</span>);</div></pre></td></tr></table></figure>
<h3 id="6-AnimationSet"><a href="#6-AnimationSet" class="headerlink" title="6. AnimationSet"></a>6. AnimationSet</h3><p>AnimationSet类对应set标签，定义动作类的集合</p>
<h5 id="构造函数：-4"><a href="#构造函数：-4" class="headerlink" title="构造函数："></a>构造函数：</h5><ul>
<li><strong>AnimationSet(Context context, AttributeSet attrs)</strong>   //同样，基本不用</li>
<li><strong>AnimationSet(boolean shareInterpolator)</strong>   //shareInterpolator取值true或false，取true时，指在AnimationSet中定义一个插值器（interpolater），它下面的所有动画共同。如果设为false，则表示它下面的动画自己定义各自的插值器。</li>
</ul>
<h5 id="增加动画函数"><a href="#增加动画函数" class="headerlink" title="增加动画函数"></a>增加动画函数</h5><pre><code>public void addAnimation (Animation a)
</code></pre><h5 id="示例：-4"><a href="#示例：-4" class="headerlink" title="示例："></a>示例：</h5><p>构造的XML代码：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"3000"</span>  </div><div class="line">    <span class="attr">android:fillAfter</span>=<span class="string">"true"</span>&gt;  </div><div class="line">      </div><div class="line">  <span class="tag">&lt;<span class="name">alpha</span>   </span></div><div class="line">    <span class="attr">android:fromAlpha</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toAlpha</span>=<span class="string">"1.0"</span>/&gt;  </div><div class="line">    </div><div class="line">  <span class="tag">&lt;<span class="name">scale</span>  </span></div><div class="line">    <span class="attr">android:fromXScale</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toXScale</span>=<span class="string">"1.4"</span>  </div><div class="line">    <span class="attr">android:fromYScale</span>=<span class="string">"0.0"</span>  </div><div class="line">    <span class="attr">android:toYScale</span>=<span class="string">"1.4"</span>  </div><div class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50%"</span>  </div><div class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50%"</span>/&gt;  </div><div class="line">    </div><div class="line">  <span class="tag">&lt;<span class="name">rotate</span>  </span></div><div class="line">    <span class="attr">android:fromDegrees</span>=<span class="string">"0"</span>  </div><div class="line">    <span class="attr">android:toDegrees</span>=<span class="string">"720"</span>  </div><div class="line">    <span class="attr">android:pivotX</span>=<span class="string">"50%"</span>  </div><div class="line">    <span class="attr">android:pivotY</span>=<span class="string">"50%"</span>/&gt;  </div><div class="line">         </div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>对应的代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">alphaAnim = <span class="keyword">new</span> AlphaAnimation(<span class="number">1.0f</span>,<span class="number">0.1f</span>);  </div><div class="line">scaleAnim = <span class="keyword">new</span> ScaleAnimation(<span class="number">0.0f</span>,<span class="number">1.4f</span>,<span class="number">0.0f</span>,<span class="number">1.4f</span>,Animation.RELATIVE_TO_SELF,<span class="number">0.5f</span>,Animation.RELATIVE_TO_SELF,<span class="number">0.5f</span>);  </div><div class="line">rotateAnim = <span class="keyword">new</span> RotateAnimation(<span class="number">0</span>, <span class="number">720</span>, Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>, Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);  </div><div class="line">  </div><div class="line">setAnim=<span class="keyword">new</span> AnimationSet(<span class="keyword">true</span>);  </div><div class="line">setAnim.addAnimation(alphaAnim);  </div><div class="line">setAnim.addAnimation(scaleAnim);  </div><div class="line">setAnim.addAnimation(rotateAnim);  </div><div class="line">  </div><div class="line">setAnim.setDuration(<span class="number">3000</span>);  </div><div class="line">setAnim.setFillAfter(<span class="keyword">true</span>);</div></pre></td></tr></table></figure>
<h3 id="7-Interpolater插值器"><a href="#7-Interpolater插值器" class="headerlink" title="7. Interpolater插值器"></a>7. Interpolater插值器</h3><p>代码使用方法：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ScaleAnimation interpolateScaleAnim=<span class="keyword">new</span> ScaleAnimation(<span class="number">0.0f</span>,<span class="number">1.4f</span>,<span class="number">0.0f</span>,<span class="number">1.4f</span>,Animation.RELATIVE_TO_SELF,<span class="number">0.5f</span>,Animation.RELATIVE_TO_SELF,<span class="number">0.5f</span>);  </div><div class="line">interpolateScaleAnim.setInterpolator(<span class="keyword">new</span> BounceInterpolator());  </div><div class="line">interpolateScaleAnim.setDuration(<span class="number">3000</span>);</div></pre></td></tr></table></figure>
<h1 id="四、ValueAnimator基本使用"><a href="#四、ValueAnimator基本使用" class="headerlink" title="四、ValueAnimator基本使用"></a>四、ValueAnimator基本使用</h1><h3 id="一、概述-2"><a href="#一、概述-2" class="headerlink" title="一、概述"></a>一、概述</h3><h5 id="1、为什么要引入Property-Animator-属性动画"><a href="#1、为什么要引入Property-Animator-属性动画" class="headerlink" title="1、为什么要引入Property Animator(属性动画)"></a>1、为什么要引入Property Animator(属性动画)</h5><pre><code>1、Property Animator能实现补间动画无法实现的功能
补间动画和逐帧动画统称为View Animation，也就是说这两个动画只能对派生自View的控件
实例起作用；而Property Animator则不同，从名字中可以看出属性动画，应该是作用于控件
属性的！正因为属性动画能够只针对控件的某一个属性来做动画，所以也就造就了他能单独改变
控件的某一个属性的值！比如颜色！这就是Property Animator能实现补间动画无法实现的功
能的最重要原因。
2、View Animation仅能对指定的控件做动画，而Property Animator是通过改变控件某一
属性值来做动画的。 
假设我们将一个按钮从左上角利用补间动画将其移动到右下角，在移动过程中和移动后，这个按钮
都是不会响应点击事件的。这是为什么呢？因为补间动画仅仅转变的是控件的显示位置而已，并没
有改变控件本身的值。View Animation的动画实现是通过其Parent View实现的，在View被
drawn时Parents View改变它的绘制参数，这样虽然View的大小或旋转角度等改变了，但View
的实际属性没变，所以有效区域还是应用动画之前的区域；我们看到的效果仅仅是系统作用在按钮
上的显示效果，利用动画把按钮从原来的位置移到了右下角，但按钮内部的任何值是没有变化的，
所以按钮所捕捉的点击区域仍是原来的点击区域。
3、补间动画虽能对控件做动画，但并没有改变控件内部的属性值。而Property Animator则是
恰恰相反，Property Animator是通过改变控件内部的属性值来达到动画效果的
</code></pre><h3 id="二、ValueAnimator简单使用"><a href="#二、ValueAnimator简单使用" class="headerlink" title="二、ValueAnimator简单使用"></a>二、ValueAnimator简单使用</h3><h5 id="1、初步使用ValueAnimator"><a href="#1、初步使用ValueAnimator" class="headerlink" title="1、初步使用ValueAnimator"></a>1、初步使用ValueAnimator</h5><p><strong>创建ValueAnimator实例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ValueAnimator animator = ValueAnimator.ofInt(<span class="number">0</span>,<span class="number">400</span>);  </div><div class="line">animator.setDuration(<span class="number">1000</span>);  </div><div class="line">animator.start();</div></pre></td></tr></table></figure>
<p>利用ValueAnimator.ofInt创建了一个值从0到400的动画，动画时长是1s，然后让动画开始。从这段代码中可以看出，ValueAnimator没有跟任何的控件相关联，那也正好说明ValueAnimator只是对值做动画运算，而不是针对控件的，我们需要监听ValueAnimator的动画过程来自己对控件做操作。 </p>
<p><strong>添加监听</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ValueAnimator animator = ValueAnimator.ofInt(<span class="number">0</span>,<span class="number">400</span>);  </div><div class="line">animator.setDuration(<span class="number">1000</span>);  </div><div class="line">  </div><div class="line">animator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;  </div><div class="line">        <span class="keyword">int</span> curValue = (<span class="keyword">int</span>)animation.getAnimatedValue();  </div><div class="line">        Log.d(<span class="string">"qijian"</span>,<span class="string">"curValue:"</span>+curValue);</div><div class="line">        tv.layout(curValue,curValue,curValue+tv.getWidth(),curValue+tv.getHeight());</div><div class="line">    &#125;  </div><div class="line">&#125;);  </div><div class="line">animator.start();</div></pre></td></tr></table></figure>
<p>这就是ValueAnimator的功能：ValueAnimator对指定值区间做动画运算，我们通过对运算过程做监听来自己操作控件。  </p>
<p><strong>总结</strong></p>
<ul>
<li>ValueAnimator只负责对指定的数字区间进行动画运算</li>
<li>我们需要对运算过程进行监听，然后自己对控件做动画操作</li>
</ul>
<h5 id="2、常用函数"><a href="#2、常用函数" class="headerlink" title="2、常用函数"></a>2、常用函数</h5><ul>
<li><strong>ValueAnimator setDuration(long duration)</strong>   //设置一次动画的时长，单位是毫秒</li>
<li><strong>void start()</strong>   //开始动画</li>
<li><strong>Object getAnimatedValue();</strong>   //获取动画在当前运动点的值，所以这个对象只能用于在动画运动中。返回的值是Object,上面我们说过，通过getAnimatedValue()得到的值的实际类型与初始设置的值相同，如果我们利用ofInt（）设置的动画，那通过getAnimatedValue()得到的值为类型就是Int类型。如果我们利用ofFloat（）设置的动画，通过getAnimatedValue()得到的值类型就是Float类型。</li>
<li><strong>void setRepeatCount(int value)</strong>   //设置循环次数,设置为INFINITE表示无限循环</li>
<li><strong>setRepeatMode(int value)</strong>   //设置循环模式,value取值有RESTART，REVERSE</li>
<li><strong>cancel()</strong>   //取消动画</li>
</ul>
<h5 id="3、监听器"><a href="#3、监听器" class="headerlink" title="3、监听器"></a>3、监听器</h5><ul>
<li>AnimatorUpdateListener就是监听动画的实时变化状态，在onAnimationUpdate(ValueAnimator animation)中的animation表示当前状态动画的实例。添加AnimatorUpdateListener的方法是addUpdateListener(AnimatorListener listener)。</li>
<li>在AnimatorListener中，主要是监听Animation的四个状态，start、end、cancel、repeat；当动画开始时，会调用onAnimationStart(Animator animation)方法，当动画结束时调用onAnimationEnd(Animator animation)，当动画取消时，调用onAnimationCancel(Animator animation)函数，当动画重复时，会调用onAnimationRepeat(Animator animation)函数。添加AnimatorListener的方法是addListener(AnimatorListener listener)。</li>
<li><strong>void removeUpdateListener(AnimatorUpdateListener listener);</strong>   //移除AnimatorUpdateListener</li>
<li><strong>void removeAllUpdateListeners();</strong>   //移除AnimatorUpdateListener </li>
<li><strong>void removeListener(AnimatorListener listener);</strong>   //用于在animator中移除指定的监听器</li>
<li><strong>void removeAllListeners();</strong>   //用于移除animator中所有的AnimatorListener监听器</li>
</ul>
<h5 id="4、其他函数"><a href="#4、其他函数" class="headerlink" title="4、其他函数"></a>4、其他函数</h5><ul>
<li><strong>public void setStartDelay(long startDelay);</strong>   //延时多久时间开始，单位是毫秒 </li>
<li><strong>public ValueAnimator clone();</strong>   //完全克隆一个ValueAnimator实例，包括它所有的设置以及所有对监听器代码的处理</li>
</ul>
<h5 id="5、插值器"><a href="#5、插值器" class="headerlink" title="5、插值器"></a>5、插值器</h5><p>控制动画的加速变化<br><code>animator.setInterpolator(new BounceInterpolator());   //简单使用</code></p>
<h5 id="6、自定义插值器"><a href="#6、自定义插值器" class="headerlink" title="6、自定义插值器"></a>6、自定义插值器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearInterpolator</span> <span class="keyword">implements</span> <span class="title">TimeInterpolator</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinearInterpolator</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	*主要重写该方法，对动画的进度从0到1进行调节</div><div class="line">	**/</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> input;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="7、Evaluator"><a href="#7、Evaluator" class="headerlink" title="7、Evaluator"></a>7、Evaluator</h5><p><img src="http://ohtrrgyyd.bkt.clouddn.com/201702084563420160120104933467.png" alt="201702084563420160120104933467.png"></p>
<p>这幅图讲述了从定义动画的数字区间到通过AnimatorUpdateListener中得到当前动画所对应数值的整个过程。下面我们对这四个步骤具体讲解一下：<br>(1)、ofInt(0,400)表示指定动画的数字区间，是从0运动到400；<br>(2)、加速器：上面我们讲了，在动画开始后，通过加速器会返回当前动画进度所对应的数字进度，但这个数字进度是百分制的，以小数表示，如0.2<br>(3)、Evaluator:我们知道我们通过监听器拿到的是当前动画所对应的具体数值，而不是百分制的进度。那么就必须有一个地方会根据当前的数字进度，将其转化为对应的数值，这个地方就是Evaluator；Evaluator就是将从加速器返回的数字进度转成对应的数字值。所以上部分中，我们讲到的公式：</p>
<p>当前的值 = 100 + （400 - 100）* 显示进度<br>这个公式就是在Evaluator计算的；在拿到当前数字进度所对应的值以后，将其返回<br>（4）、监听器：我们通过在AnimatorUpdateListener监听器使用animation.getAnimatedValue()函数拿到Evaluator中返回的数字值。</p>
<p>ofInt和ofFloat都是系统直接提供的函数，所以在使用时都会有默认的加速器和Evaluator来使用的，不指定则使用默认的；对于Evaluator而言，ofInt()的默认Evaluator当然是IntEvaluator;而FloatEvalutar默认的则是FloatEvalutor; Evalutor一般来讲不能通用，会报强转错误，也就是说，只有在数值类型相同的情况下，Evalutor才能共用。<br><strong>Evaluator其实就是一个转换器，他能把小数进度转换成对应的数值位置</strong></p>
<h5 id="8、自定义Evaluator"><a href="#8、自定义Evaluator" class="headerlink" title="8、自定义Evaluator"></a>8、自定义Evaluator</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyEvaluator</span> <span class="keyword">implements</span> <span class="title">TypeEvaluator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">evaluate</span><span class="params">(<span class="keyword">float</span> fraction, Integer startValue, Integer endValue)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> startInt = startValue;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(<span class="number">200</span>+startInt + fraction * (endValue - startInt));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>我们可以通过重写加速器改变数值进度来改变数值位置，也可以通过改变Evaluator中进度所对应的数值来改变数值位置。</strong></p>
<h5 id="9、ArgbEvalutor"><a href="#9、ArgbEvalutor" class="headerlink" title="9、ArgbEvalutor"></a>9、ArgbEvalutor</h5><p>ArgbEvalutor是用来做颜色值过渡转换的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ValueAnimator animator = ValueAnimator.ofInt(<span class="number">0xffffff00</span>,<span class="number">0xff0000ff</span>);</div><div class="line">animator.setEvaluator(<span class="keyword">new</span> ArgbEvaluator());</div><div class="line">animator.setDuration(<span class="number">3000</span>);</div></pre></td></tr></table></figure>
<h5 id="10、ofInt-ofFloat-ofObject"><a href="#10、ofInt-ofFloat-ofObject" class="headerlink" title="10、ofInt(),ofFloat(),ofObject()"></a>10、ofInt(),ofFloat(),ofObject()</h5><p>ofInt()只能传入Integer类型的值,而ofFloat（）则只能传入Float类型的值,ofObject(),可以传进去任何类型的变量.</p>
<p><strong>ofObject()示例</strong><br>1、简单示例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ValueAnimator animator = ValueAnimator.ofObject(<span class="keyword">new</span> CharEvaluator(),<span class="keyword">new</span> Character(<span class="string">'A'</span>),<span class="keyword">new</span> Character(<span class="string">'Z'</span>));  </div><div class="line">animator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;  </div><div class="line">        <span class="keyword">char</span> text = (<span class="keyword">char</span>)animation.getAnimatedValue();  </div><div class="line">        tv.setText(String.valueOf(text));  </div><div class="line">    &#125;  </div><div class="line">&#125;);  </div><div class="line">animator.setDuration(<span class="number">10000</span>);  </div><div class="line">animator.setInterpolator(<span class="keyword">new</span> AccelerateInterpolator());  </div><div class="line">animator.start();</div></pre></td></tr></table></figure>
<p>2、自定义示例</p>
<p><img src="http://ohtrrgyyd.bkt.clouddn.com/201702082067420160120165531838.gif" alt="201702082067420160120165531838.gif"><br>在这里，我们自定义了一个View，在这个view上画一个圆，但这个圆是有动画效果的。从效果中可以看出使用的插值器应该是回弹插值器(BounceInterpolator)。下面就来看看这个动画是怎么做出来的。   </p>
<p><strong>首先，我们自定义一个类Point</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> radius;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> radius)</span></span>&#123;  </div><div class="line">        <span class="keyword">this</span>.radius = radius;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRadius</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> radius;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRadius</span><span class="params">(<span class="keyword">int</span> radius)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.radius = radius;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>然后我们自定义一个View:MyPointView</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPointView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> Point mCurPoint;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyPointView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>(context, attrs);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onDraw(canvas);  </div><div class="line">        <span class="keyword">if</span> (mCurPoint != <span class="keyword">null</span>)&#123;  </div><div class="line">            Paint paint = <span class="keyword">new</span> Paint();  </div><div class="line">            paint.setAntiAlias(<span class="keyword">true</span>);  </div><div class="line">            paint.setColor(Color.RED);  </div><div class="line">            paint.setStyle(Paint.Style.FILL);  </div><div class="line">            canvas.drawCircle(<span class="number">300</span>,<span class="number">300</span>,mCurPoint.getRadius(),paint);  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPointAnim</span><span class="params">()</span></span>&#123;  </div><div class="line">        ValueAnimator animator = ValueAnimator.ofObject(<span class="keyword">new</span> PointEvaluator(),<span class="keyword">new</span> Point(<span class="number">20</span>),<span class="keyword">new</span> Point(<span class="number">200</span>));  </div><div class="line">        animator.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;  </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;  </div><div class="line">                mCurPoint = (Point)animation.getAnimatedValue();  </div><div class="line">                invalidate();  </div><div class="line">            &#125;  </div><div class="line">        &#125;);  </div><div class="line">        animator.setDuration(<span class="number">1000</span>);  </div><div class="line">        animator.setInterpolator(<span class="keyword">new</span> BounceInterpolator());  </div><div class="line">        animator.start();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>在布局中添加入自定义View，然后在主界面中调用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> Button btnStart;  </div><div class="line">    <span class="keyword">private</span> MyPointView mPointView;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.main);  </div><div class="line">  </div><div class="line">        btnStart = (Button) findViewById(R.id.btn);  </div><div class="line">        mPointView = (MyPointView)findViewById(R.id.pointview);  </div><div class="line">  </div><div class="line">        btnStart.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;  </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">                mPointView.doPointAnim();  </div><div class="line">            &#125;  </div><div class="line">        &#125;);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="三、ObjectAnimator基础使用"><a href="#三、ObjectAnimator基础使用" class="headerlink" title="三、ObjectAnimator基础使用"></a>三、ObjectAnimator基础使用</h3><p>为了能让动画直接与对应控件相关联，以使我们从监听动画过程中解放出来，谷歌的开发人员在ValueAnimator的基础上，又派生了一个类ObjectAnimator; 由于ObjectAnimator是派生自ValueAnimator的，所以ValueAnimator中所能使用的方法，在ObjectAnimator中都可以正常使用。但ObjectAnimator也重写了几个方法，比如ofInt(),ofFloat()等。</p>
<h5 id="改变透明度示例"><a href="#改变透明度示例" class="headerlink" title="改变透明度示例"></a>改变透明度示例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator animator = ObjectAnimator.ofFloat(tv,<span class="string">"alpha"</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);  </div><div class="line">animator.setDuration(<span class="number">2000</span>);</div><div class="line">animator.start();</div></pre></td></tr></table></figure>
<h5 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h5><p><code>public static ObjectAnimator ofFloat(Object target, String propertyName, float... values)</code></p>
<ul>
<li>第一个参数用于指定这个动画要操作的是哪个控件</li>
<li>第二个参数用于指定这个动画要操作这个控件的哪个属性(rotationX-围绕X轴，rotationY-围绕Y轴，rotation围绕Z轴，translationX-在X轴上水平移动，translationY-在Y轴上水平移动，scaleX-在X轴上缩放倍数，scaleY-在Y轴上缩放倍数)</li>
<li>第三个参数是可变长参数，这个就跟ValueAnimator中的可变长参数的意义一样了，就是指这个属性值是从哪变到哪</li>
</ul>
<h5 id="自定义ObjectAnimator属性"><a href="#自定义ObjectAnimator属性" class="headerlink" title="自定义ObjectAnimator属性"></a>自定义ObjectAnimator属性</h5><p><strong>1、保存圆形信息类——Point</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mRadius;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> radius)</span></span>&#123;  </div><div class="line">        mRadius = radius;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRadius</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> mRadius;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRadius</span><span class="params">(<span class="keyword">int</span> radius)</span> </span>&#123;  </div><div class="line">        mRadius = radius;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>2、自定义控件——MyPointView</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPointView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> Point mPoint = <span class="keyword">new</span> Point(<span class="number">100</span>);  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyPointView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>(context, attrs);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;  </div><div class="line">        <span class="keyword">if</span> (mPoint != <span class="keyword">null</span>)&#123;  </div><div class="line">            Paint paint = <span class="keyword">new</span> Paint();  </div><div class="line">            paint.setAntiAlias(<span class="keyword">true</span>);  </div><div class="line">            paint.setColor(Color.RED);  </div><div class="line">            paint.setStyle(Paint.Style.FILL);  </div><div class="line">            canvas.drawCircle(<span class="number">300</span>,<span class="number">300</span>,mPoint.getRadius(),paint);  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">super</span>.onDraw(canvas);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setPointRadius</span><span class="params">(<span class="keyword">int</span> radius)</span></span>&#123;  </div><div class="line">        mPoint.setRadius(radius);  </div><div class="line">        invalidate();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>3、MyActivity</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> Button btnStart;  </div><div class="line">    <span class="keyword">private</span> MyPointView mPointView;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.main);  </div><div class="line">  </div><div class="line">        btnStart = (Button) findViewById(R.id.btn);  </div><div class="line">        mPointView = (MyPointView)findViewById(R.id.pointview);  </div><div class="line">  </div><div class="line">        btnStart.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;  </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">                doPointViewAnimation();  </div><div class="line">            &#125;  </div><div class="line">        &#125;);  </div><div class="line">    &#125;  </div><div class="line">  	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doPointViewAnimation</span><span class="params">()</span></span>&#123;  </div><div class="line">     ObjectAnimator animator = ObjectAnimator.ofInt(mPointView, <span class="string">"pointRadius"</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">100</span>);  </div><div class="line">     animator.setDuration(<span class="number">2000</span>);  </div><div class="line">     animator.start();  </div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="五、PropertyValuesHolder与Keyframe"><a href="#五、PropertyValuesHolder与Keyframe" class="headerlink" title="五、PropertyValuesHolder与Keyframe"></a>五、PropertyValuesHolder与Keyframe</h1><p>ValueAnimator和ObjectAnimator除了通过ofInt(),ofFloat(),ofObject()创建实例外，还都有一个ofPropertyValuesHolder()方法来创建实例。通常ValueAnimator使用ofPropertyValuesHolder()的机会不多，所以只讲ObjectAnimator中ofPropertyValuesHolder()的用法。对于ValueAnimator的ofPropertyValuesHolder()使用是差不多的。</p>
<h3 id="1、PropertyValuesHolder"><a href="#1、PropertyValuesHolder" class="headerlink" title="1、PropertyValuesHolder"></a>1、PropertyValuesHolder</h3><h4 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h4><p>PropertyValuesHolder这个类的意义就是，它其中保存了动画过程中所需要操作的属性和对应的值。我们通过ofFloat(Object target, String propertyName, float… values)构造的动画，ofFloat()的内部实现其实就是将传进来的参数封装成PropertyValuesHolder实例来保存动画状态。在封装成PropertyValuesHolder实例以后，后期的各种操作也是以PropertyValuesHolder为主的。 </p>
<p><strong>创建实例的函数</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PropertyValuesHolder <span class="title">ofFloat</span><span class="params">(String propertyName, <span class="keyword">float</span>... values)</span>  </span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> PropertyValuesHolder <span class="title">ofInt</span><span class="params">(String propertyName, <span class="keyword">int</span>... values)</span>   </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> PropertyValuesHolder <span class="title">ofObject</span><span class="params">(String propertyName, TypeEvaluator evaluator,Object... values)</span>  </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> PropertyValuesHolder <span class="title">ofKeyframe</span><span class="params">(String propertyName, Keyframe... values)</span></div></pre></td></tr></table></figure></p>
<p>这里总共有四个创建实例的方法，这一段我们着重讲ofFloat、ofInt和ofObject的用法，ofKeyframe我们单独讲。</p>
<h4 id="2、PropertyValuesHolder之ofFloat-、ofInt"><a href="#2、PropertyValuesHolder之ofFloat-、ofInt" class="headerlink" title="2、PropertyValuesHolder之ofFloat()、ofInt()"></a>2、PropertyValuesHolder之ofFloat()、ofInt()</h4><h5 id="（1）ofFloat-、ofInt"><a href="#（1）ofFloat-、ofInt" class="headerlink" title="（1）ofFloat()、ofInt()"></a>（1）ofFloat()、ofInt()</h5><p><strong>构造函数</strong>  </p>
<pre><code>public static PropertyValuesHolder ofFloat(String propertyName, float... values)  
public static PropertyValuesHolder ofInt(String propertyName, int... values)
</code></pre><ul>
<li>propertyName：表示ObjectAnimator需要操作的属性名。即ObjectAnimator需要通过反射查找对应属性的setProperty()函数的那个property.</li>
<li>values：属性所对应的参数，同样是可变长参数，可以指定多个，还记得我们在ObjectAnimator中讲过，如果只指定了一个，那么ObjectAnimator会通过查找getProperty()方法来获得初始值。</li>
</ul>
<h5 id="（2）、ObjectAnimator-ofPropertyValuesHolder"><a href="#（2）、ObjectAnimator-ofPropertyValuesHolder" class="headerlink" title="（2）、ObjectAnimator.ofPropertyValuesHolder()"></a>（2）、ObjectAnimator.ofPropertyValuesHolder()</h5><p>ObjectAnimator提供了一个设置PropertyValuesHolder实例的入口：</p>
<pre><code>public static ObjectAnimator ofPropertyValuesHolder(Object target,PropertyValuesHolder... values);
</code></pre><ul>
<li>target：指需要执行动画的控件</li>
<li>values：是一个可变长参数，可以传进去多个PropertyValuesHolder实例，由于每个PropertyValuesHolder实例都会针对一个属性做动画，所以如果传进去多个PropertyValuesHolder实例，将会对控件的多个属性同时做动画操作。 </li>
</ul>
<p><strong>示例</strong>  </p>
<p><img src="http://ohtrrgyyd.bkt.clouddn.com/201702096229820160226223929399.gif" alt="201702096229820160226223929399.gif"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">PropertyValuesHolder rotationHolder = PropertyValuesHolder.ofFloat(<span class="string">"Rotation"</span>, <span class="number">60f</span>, -<span class="number">60f</span>, <span class="number">40f</span>, -<span class="number">40f</span>, -<span class="number">20f</span>, <span class="number">20f</span>, <span class="number">10f</span>, -<span class="number">10f</span>, <span class="number">0f</span>);  </div><div class="line">PropertyValuesHolder colorHolder = PropertyValuesHolder.ofInt(<span class="string">"BackgroundColor"</span>, <span class="number">0xffffffff</span>, <span class="number">0xffff00ff</span>, <span class="number">0xffffff00</span>, <span class="number">0xffffffff</span>);  </div><div class="line">ObjectAnimator animator = ObjectAnimator.ofPropertyValuesHolder(mTextView, rotationHolder, colorHolder);  </div><div class="line">animator.setDuration(<span class="number">3000</span>);  </div><div class="line">animator.setInterpolator(<span class="keyword">new</span> AccelerateInterpolator());  </div><div class="line">animator.start();</div></pre></td></tr></table></figure>
<h4 id="3、PropertyValuesHolder之ofObject"><a href="#3、PropertyValuesHolder之ofObject" class="headerlink" title="3、PropertyValuesHolder之ofObject()"></a>3、PropertyValuesHolder之ofObject()</h4><h5 id="ofObject的构造函数"><a href="#ofObject的构造函数" class="headerlink" title="ofObject的构造函数"></a>ofObject的构造函数</h5><pre><code>public static PropertyValuesHolder ofObject(String propertyName, TypeEvaluator evaluator,Object... values);
</code></pre><ul>
<li>propertyName:ObjectAnimator动画操作的属性名;</li>
<li>evaluator:Evaluator实例，Evaluator是将当前动画进度计算出当前值的类，可以使用系统自带的IntEvaluator、FloatEvaluator也可以自定义。</li>
<li>values：可变长参数，表示操作动画属性的值。</li>
</ul>
<h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><p><img src="http://ohtrrgyyd.bkt.clouddn.com/201702094808220160226224343549.gif" alt="201702094808220160226224343549.gif"></p>
<p>通过自字义的CharEvaluator来自动实现字母的改变与计算。</p>
<ul>
<li><p>首先是自定义一个CharEvaluator,通过进度值来自动计算出当前的字母:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharEvaluator</span> <span class="keyword">implements</span> <span class="title">TypeEvaluator</span>&lt;<span class="title">Character</span>&gt; </span>&#123;  </div><div class="line">   	<span class="meta">@Override</span>  </div><div class="line">   	<span class="function"><span class="keyword">public</span> Character <span class="title">evaluate</span><span class="params">(<span class="keyword">float</span> fraction, Character startValue, Character endValue)</span> </span>&#123;  </div><div class="line">       	<span class="keyword">int</span> startInt  = (<span class="keyword">int</span>)startValue;  </div><div class="line">       	<span class="keyword">int</span> endInt = (<span class="keyword">int</span>)endValue;  </div><div class="line">       	<span class="keyword">int</span> curInt = (<span class="keyword">int</span>)(startInt + fraction *(endInt - startInt));  </div><div class="line">       	<span class="keyword">char</span> result = (<span class="keyword">char</span>)curInt;  </div><div class="line">       	<span class="keyword">return</span> result;  </div><div class="line">  		&#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>从CharEvaluator中可以看出，从CharEvaluator中产出的动画中间值类型为Character类型。TextView中虽然有setText(CharSequence text) 函数，但这个函数的参数类型是CharSequence，而不是Character类型。所以我们要自定义一个类派生自TextView来改变TextView的字符</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTextView</span> <span class="keyword">extends</span> <span class="title">TextView</span> </span>&#123;  </div><div class="line">   	<span class="function"><span class="keyword">public</span> <span class="title">MyTextView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;  </div><div class="line">       	<span class="keyword">super</span>(context, attrs);  </div><div class="line">   	&#125;  </div><div class="line">   	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCharText</span><span class="params">(Character character)</span></span>&#123;  </div><div class="line">       	setText(String.valueOf(character));  </div><div class="line">   	&#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>最后MyActivity,在点击按钮的时候开始动画，核心代码为:  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">   	<span class="keyword">private</span> Button btn;  </div><div class="line">   	<span class="keyword">private</span> TextView mTextView;  </div><div class="line">   	<span class="keyword">private</span> MyTextView mMyTv;  </div><div class="line">   	<span class="meta">@Override</span>  </div><div class="line">   	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">       	<span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">       	setContentView(R.layout.main);  </div><div class="line"> </div><div class="line">       	mMyTv = (MyTextView)findViewById(R.id.mytv);  </div><div class="line">       	btn = (Button) findViewById(R.id.btn);  </div><div class="line">       	btn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;  </div><div class="line">           	<span class="meta">@Override</span>  </div><div class="line">           	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">               	doOfObjectAnim();  </div><div class="line">           	&#125;  </div><div class="line">       	&#125;);  </div><div class="line">   	&#125;  </div><div class="line"> </div><div class="line">   	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doOfObjectAnim</span><span class="params">()</span></span>&#123;  </div><div class="line">       	PropertyValuesHolder charHolder = PropertyValuesHolder.ofObject(<span class="string">"CharText"</span>,<span class="keyword">new</span> CharEvaluator(),<span class="keyword">new</span> Character(<span class="string">'A'</span>),<span class="keyword">new</span> Character(<span class="string">'Z'</span>));  </div><div class="line">       	ObjectAnimator animator = ObjectAnimator.ofPropertyValuesHolder(mMyTv, charHolder);  </div><div class="line">       	animator.setDuration(<span class="number">3000</span>);  </div><div class="line">       	animator.setInterpolator(<span class="keyword">new</span> AccelerateInterpolator());  </div><div class="line">       	animator.start();  </div><div class="line">   	&#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3、Keyframe"><a href="#3、Keyframe" class="headerlink" title="3、Keyframe"></a>3、Keyframe</h4><h5 id="1、概述-1"><a href="#1、概述-1" class="headerlink" title="1、概述"></a>1、概述</h5><p>—-我们知道如果要控制动画速率的变化，我们可以通过自定义插值器，也可以通过自定义Evaluator来实现。但如果真的让我们为了速率变化效果而自定义插值器或者Evaluator的话，恐怕大部分同学会有一万头草泥马在眼前奔过，因为大部分的同学的数学知识已经还给老师了。<br>—-为了解决方便的控制动画速率的问题，谷歌为了我等屁民定义了一个KeyFrame的类，KeyFrame直译过来就是关键帧。<br>—-关键帧这个概念是从动画里学来的，我们知道视频里，一秒要播放24帧图片，对于制作flash动画的同学来讲，是不是每一帧都要画出来呢？当然不是了，如果每一帧都画出来，那估计做出来一个动画片都得要一年时间；比如我们要让一个球在30秒时间内，从（0,0）点运动到（300，200）点，那flash是怎么来做的呢，在flash中，我们只需要定义两个关键帧，在动画开始时定义一个，把球的位置放在(0,0)点；在30秒后，再定义一个关键帧，把球的位置放在（300，200）点。在动画 开始时，球初始在是（0，0）点，30秒时间内就adobe flash就会自动填充，把球平滑移动到第二个关键帧的位置（300，200）点；<br>—-通过上面分析flash动画的制作原理，我们知道，一个关键帧必须包含两个原素，第一时间点，第二位置。即这个关键帧是表示的是某个物体在哪个时间点应该在哪个位置上。<br>—-所以谷歌的KeyFrame也不例外，KeyFrame的生成方式为：</p>
<pre><code>public static Keyframe ofFloat(float fraction, float value);
</code></pre><ul>
<li>fraction：表示当前的显示进度，即从加速器中getInterpolation()函数的返回值；</li>
<li>value：表示当前应该在的位置</li>
</ul>
<p>比如Keyframe.ofFloat(0, 0)表示动画进度为0时，动画所在的数值位置为0；Keyframe.ofFloat(0.25f, -20f)表示动画进度为25%时，动画所在的数值位置为-20；Keyframe.ofFloat(1f,0)表示动画结束时，动画所在的数值位置为0；在理解了KeyFrame.ofFloat()的参数以后，我们来看看PropertyValuesHolder是如何使用KeyFrame对象的：</p>
<pre><code>public static PropertyValuesHolder ofKeyframe(String propertyName, Keyframe... values);
</code></pre><ul>
<li>propertyName：动画所要操作的属性名</li>
<li>values：Keyframe的列表，PropertyValuesHolder会根据每个Keyframe的设定，定时将指定的值输出给动画。</li>
</ul>
<p><strong>完整的KeyFrame使用代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Keyframe frame0 = Keyframe.ofFloat(<span class="number">0f</span>, <span class="number">0</span>);  </div><div class="line">Keyframe frame1 = Keyframe.ofFloat(<span class="number">0.1f</span>, -<span class="number">20f</span>);  </div><div class="line">Keyframe frame2 = Keyframe.ofFloat(<span class="number">1</span>, <span class="number">0</span>);  </div><div class="line">PropertyValuesHolder frameHolder = PropertyValuesHolder.ofKeyframe(<span class="string">"rotation"</span>,frame0,frame1,frame2);  </div><div class="line"> Animator animator = ObjectAnimator.ofPropertyValuesHolder(mImage,frameHolder);  </div><div class="line">animator.setDuration(<span class="number">1000</span>);  </div><div class="line">animator.start();</div></pre></td></tr></table></figure>
<p><strong>第一步：</strong>生成Keyframe对象；<br><strong>第二步：</strong>利用PropertyValuesHolder.ofKeyframe()生成PropertyValuesHolder对象<br><strong>第三步：</strong>ObjectAnimator.ofPropertyValuesHolder()生成对应的Animator   </p>
<h5 id="2、示例"><a href="#2、示例" class="headerlink" title="2、示例"></a>2、示例</h5><p><img src="http://ohtrrgyyd.bkt.clouddn.com/201702093773320160227110743594.gif" alt="201702093773320160227110743594.gif"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> ImageView mImage;  </div><div class="line">    <span class="keyword">private</span> Button mBtn;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.main);  </div><div class="line">        mImage = (ImageView)findViewById(R.id.img);  </div><div class="line">        mBtn = (Button)findViewById(R.id.btn);  </div><div class="line">        mBtn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;  </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">                doOfFloatAnim();  </div><div class="line">            &#125;  </div><div class="line">        &#125;);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doOfFloatAnim</span><span class="params">()</span></span>&#123;  </div><div class="line">        <span class="comment">/** </span></div><div class="line"> 		  * 左右震动效果 </div><div class="line">		  */  </div><div class="line">		Keyframe frame0 = Keyframe.ofFloat(<span class="number">0f</span>, <span class="number">0</span>);  </div><div class="line">		Keyframe frame1 = Keyframe.ofFloat(<span class="number">0.1f</span>, -<span class="number">20f</span>);  </div><div class="line">		Keyframe frame2 = Keyframe.ofFloat(<span class="number">0.2f</span>, <span class="number">20f</span>);  </div><div class="line">		Keyframe frame3 = Keyframe.ofFloat(<span class="number">0.3f</span>, -<span class="number">20f</span>);  </div><div class="line">		Keyframe frame4 = Keyframe.ofFloat(<span class="number">0.4f</span>, <span class="number">20f</span>);  </div><div class="line">		Keyframe frame5 = Keyframe.ofFloat(<span class="number">0.5f</span>, -<span class="number">20f</span>);  </div><div class="line">		Keyframe frame6 = Keyframe.ofFloat(<span class="number">0.6f</span>, <span class="number">20f</span>);  </div><div class="line">		Keyframe frame7 = Keyframe.ofFloat(<span class="number">0.7f</span>, -<span class="number">20f</span>);  </div><div class="line">		Keyframe frame8 = Keyframe.ofFloat(<span class="number">0.8f</span>, <span class="number">20f</span>);  </div><div class="line">		Keyframe frame9 = Keyframe.ofFloat(<span class="number">0.9f</span>, -<span class="number">20f</span>);  </div><div class="line">		Keyframe frame10 = Keyframe.ofFloat(<span class="number">1</span>, <span class="number">0</span>);  </div><div class="line">		PropertyValuesHolder frameHolder1 = PropertyValuesHolder.ofKeyframe(<span class="string">"rotation"</span>, frame0, frame1, frame2, frame3, frame4,frame5, frame6, frame7, frame8, frame9, frame10);  </div><div class="line">  </div><div class="line">  </div><div class="line">		<span class="comment">/** </span></div><div class="line">		 * scaleX放大1.1倍 </div><div class="line"> 		 */  </div><div class="line">		Keyframe scaleXframe0 = Keyframe.ofFloat(<span class="number">0f</span>, <span class="number">1</span>);  </div><div class="line">		Keyframe scaleXframe1 = Keyframe.ofFloat(<span class="number">0.1f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe2 = Keyframe.ofFloat(<span class="number">0.2f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe3 = Keyframe.ofFloat(<span class="number">0.3f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe4 = Keyframe.ofFloat(<span class="number">0.4f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe5 = Keyframe.ofFloat(<span class="number">0.5f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe6 = Keyframe.ofFloat(<span class="number">0.6f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe7 = Keyframe.ofFloat(<span class="number">0.7f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe8 = Keyframe.ofFloat(<span class="number">0.8f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe9 = Keyframe.ofFloat(<span class="number">0.9f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleXframe10 = Keyframe.ofFloat(<span class="number">1</span>, <span class="number">1</span>);  </div><div class="line">		PropertyValuesHolder frameHolder2 = PropertyValuesHolder.ofKeyframe(<span class="string">"ScaleX"</span>,scaleXframe0,scaleXframe1,scaleXframe2,scaleXframe3,scaleXframe4,scaleXframe5,scaleXframe6,scaleXframe7,scaleXframe8,scaleXframe9,scaleXframe10);  </div><div class="line">  </div><div class="line">  </div><div class="line">		<span class="comment">/** </span></div><div class="line"> 		 * scaleY放大1.1倍 </div><div class="line"> 		 */  </div><div class="line">		Keyframe scaleYframe0 = Keyframe.ofFloat(<span class="number">0f</span>, <span class="number">1</span>);  </div><div class="line">		Keyframe scaleYframe1 = Keyframe.ofFloat(<span class="number">0.1f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe2 = Keyframe.ofFloat(<span class="number">0.2f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe3 = Keyframe.ofFloat(<span class="number">0.3f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe4 = Keyframe.ofFloat(<span class="number">0.4f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe5 = Keyframe.ofFloat(<span class="number">0.5f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe6 = Keyframe.ofFloat(<span class="number">0.6f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe7 = Keyframe.ofFloat(<span class="number">0.7f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe8 = Keyframe.ofFloat(<span class="number">0.8f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe9 = Keyframe.ofFloat(<span class="number">0.9f</span>, <span class="number">1.1f</span>);  </div><div class="line">		Keyframe scaleYframe10 = Keyframe.ofFloat(<span class="number">1</span>, <span class="number">1</span>);  </div><div class="line">		PropertyValuesHolder frameHolder3 = PropertyValuesHolder.ofKeyframe(<span class="string">"ScaleY"</span>,scaleYframe0,scaleYframe1,scaleYframe2,scaleYframe3,scaleYframe4,scaleYframe5,scaleYframe6,scaleYframe7,scaleYframe8,scaleYframe9,scaleYframe10);  </div><div class="line">  </div><div class="line">		<span class="comment">/** </span></div><div class="line"> 		 * 构建动画 </div><div class="line"> 		 */  </div><div class="line">		Animator animator = ObjectAnimator.ofPropertyValuesHolder(mImage, frameHolder1,frameHolder2,frameHolder3);  </div><div class="line">		animator.setDuration(<span class="number">1000</span>);  </div><div class="line">		animator.start();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="3、常用函数"><a href="#3、常用函数" class="headerlink" title="3、常用函数"></a>3、常用函数</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** </span></div><div class="line"> * ofFloat </div><div class="line"> */  </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Keyframe <span class="title">ofFloat</span><span class="params">(<span class="keyword">float</span> fraction)</span>   </span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Keyframe <span class="title">ofFloat</span><span class="params">(<span class="keyword">float</span> fraction, <span class="keyword">float</span> value)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * ofInt </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Keyframe <span class="title">ofInt</span><span class="params">(<span class="keyword">float</span> fraction)</span>  </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Keyframe <span class="title">ofInt</span><span class="params">(<span class="keyword">float</span> fraction, <span class="keyword">int</span> value)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * ofObject </div><div class="line"> */ </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Keyframe <span class="title">ofObject</span><span class="params">(<span class="keyword">float</span> fraction)</span>  </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> Keyframe <span class="title">ofObject</span><span class="params">(<span class="keyword">float</span> fraction, Object value)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 设置fraction参数，即Keyframe所对应的进度 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFraction</span><span class="params">(<span class="keyword">float</span> fraction)</span>   </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 设置当前Keyframe所对应的值 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object value)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 设置Keyframe动作期间所对应的插值器 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInterpolator</span><span class="params">(TimeInterpolator interpolator)</span></div></pre></td></tr></table></figure>
<h4 id="PropertyValuesHolder之其它函数"><a href="#PropertyValuesHolder之其它函数" class="headerlink" title="PropertyValuesHolder之其它函数"></a>PropertyValuesHolder之其它函数</h4><p>PropertyValuesHolder除了上面的讲到的ofInt,ofFloat,ofObject,ofKeyframe以外，api 11的还有几个函数：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** </span></div><div class="line"> * 设置动画的Evaluator </div><div class="line"> */  </div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEvaluator</span><span class="params">(TypeEvaluator evaluator)</span>  </span></div><div class="line"><span class="comment">/** </span></div><div class="line"> * 用于设置ofFloat所对应的动画值列表 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFloatValues</span><span class="params">(<span class="keyword">float</span>... values)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 用于设置ofInt所对应的动画值列表 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIntValues</span><span class="params">(<span class="keyword">int</span>... values)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 用于设置ofKeyframe所对应的动画值列表 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKeyframes</span><span class="params">(Keyframe... values)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 用于设置ofObject所对应的动画值列表 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObjectValues</span><span class="params">(Object... values)</span>  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * 设置动画属性名 </div><div class="line"> */  </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPropertyName</span><span class="params">(String propertyName)</span></div></pre></td></tr></table></figure></p>
<h1 id="六、联合动画的代码实现"><a href="#六、联合动画的代码实现" class="headerlink" title="六、联合动画的代码实现"></a>六、联合动画的代码实现</h1><p>上几篇给大家分别讲了ValueAnimator和ObjectAnimator,相比而言ObjectAnimator更为方便而且由于set函数是在控件类内部实现，所以封装性更好。而且在现实使用中一般而言都是使用ObjectAnimator的机率比较大。<br>但ValueAnimator和ObjectAnimator都只能单单实现一个动画，那如果我们想要使用一个组合动画，比如边放大，边移动，边改变alpha值，要怎么办。对于这种组合型的动画，谷歌给我们提供了一个类AnimatorSet;这篇我们就着重来看看组合动画的实现方法吧。</p>
<h3 id="1、AnimatorSet——playSequentially-playTogether"><a href="#1、AnimatorSet——playSequentially-playTogether" class="headerlink" title="1、AnimatorSet——playSequentially,playTogether"></a>1、AnimatorSet——playSequentially,playTogether</h3><p>首先，AnimatorSet针对ValueAnimator和ObjectAnimator都是适用的，但一般而言，我们不会用到ValueAnimator的组合动画，所以我们这篇仅讲解ObjectAnimator下的组合动画实现。<br>在AnimatorSet中直接给为我们提供了两个方法playSequentially和playTogether，playSequentially表示所有动画依次播放，playTogether表示所有动画一起开始。</p>
<h4 id="1、playSequentially"><a href="#1、playSequentially" class="headerlink" title="1、playSequentially"></a>1、playSequentially</h4><pre><code>public void playSequentially(Animator... items);
public void playSequentially(List&lt;Animator&gt; items);
</code></pre><p>这里有两种声明，第一个是我们最常用的，它的参数是可变长参数，也就是说我们可以传进去任意多个Animator对象。这些对象的动画会逐个播放。第二个构造函数，是传进去一个List&lt; Animator&gt;的列表。原理一样，也是逐个去取List中的动画对象，然后逐个播放。但使用起来稍微麻烦一些。 </p>
<h5 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Button mButton;</div><div class="line">    <span class="keyword">private</span> TextView mTv1, mTv2;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line"></div><div class="line">        mButton = (Button) findViewById(R.id.btn);</div><div class="line">        mTv1 = (TextView) findViewById(R.id.tv_1);</div><div class="line">        mTv2 = (TextView) findViewById(R.id.tv_2);</div><div class="line"></div><div class="line">        mButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                doPlaySequentiallyAnimator();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doPlaySequentiallyAnimator</span><span class="params">()</span></span>&#123;</div><div class="line">    ObjectAnimator tv1BgAnimator = ObjectAnimator.ofInt(mTv1, <span class="string">"BackgroundColor"</span>,  <span class="number">0xffff00ff</span>, <span class="number">0xffffff00</span>, <span class="number">0xffff00ff</span>);</div><div class="line">    ObjectAnimator tv1TranslateY = ObjectAnimator.ofFloat(mTv1, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">0</span>);</div><div class="line">    ObjectAnimator tv2TranslateY = ObjectAnimator.ofFloat(mTv2, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">    AnimatorSet animatorSet = <span class="keyword">new</span> AnimatorSet();</div><div class="line">    animatorSet.playSequentially(tv1BgAnimator,tv1TranslateY,tv2TranslateY);</div><div class="line">    animatorSet.setDuration(<span class="number">1000</span>);</div><div class="line">    animatorSet.start();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2、playTogether"><a href="#2、playTogether" class="headerlink" title="2、playTogether"></a>2、playTogether</h4><pre><code>public void playTogether(Animator... items);
public void playTogether(Collection&lt;Animator&gt; items);
</code></pre><p>同样这里也是有两个构造函数，他们两个的意义是一样的，只是传入的参数不一样，第一个依然是传可变长参数列表，第二个则是需要传一个组装好的Collection<animator>对象。</animator></p>
<h5 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator tv1BgAnimator = ObjectAnimator.ofInt(mTv1, <span class="string">"BackgroundColor"</span>,  <span class="number">0xffff00ff</span>, <span class="number">0xffffff00</span>, <span class="number">0xffff00ff</span>);</div><div class="line">ObjectAnimator tv1TranslateY = ObjectAnimator.ofFloat(mTv1, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">0</span>);</div><div class="line">ObjectAnimator tv2TranslateY = ObjectAnimator.ofFloat(mTv2, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">AnimatorSet animatorSet = <span class="keyword">new</span> AnimatorSet();</div><div class="line">animatorSet.playTogether(tv1BgAnimator,tv1TranslateY,tv2TranslateY);</div><div class="line">animatorSet.setDuration(<span class="number">1000</span>);</div><div class="line">animatorSet.start();</div></pre></td></tr></table></figure>
<h4 id="自由设置动画顺序——AnimatorSet-Builder"><a href="#自由设置动画顺序——AnimatorSet-Builder" class="headerlink" title="自由设置动画顺序——AnimatorSet.Builder"></a>自由设置动画顺序——AnimatorSet.Builder</h4><p>上面我们讲了playTogether和playSequentially，分别能实现一起开始动画和逐个开始动画。但并不是非常自由的组合动画，比如我们有三个动画A,B,C我们想先播放C然后同时播放A和B。利用playTogether和playSequentially是没办法实现的，所以为了更方便的组合动画，谷歌的开发人员另外给我们提供一个类AnimatorSet.Builder。</p>
<h5 id="1、示例"><a href="#1、示例" class="headerlink" title="1、示例"></a>1、示例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator tv1BgAnimator = ObjectAnimator.ofInt(mTv1, <span class="string">"BackgroundColor"</span>,  <span class="number">0xffff00ff</span>, <span class="number">0xffffff00</span>, <span class="number">0xffff00ff</span>);</div><div class="line">ObjectAnimator tv1TranslateY = ObjectAnimator.ofFloat(mTv1, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">AnimatorSet animatorSet = <span class="keyword">new</span> AnimatorSet();</div><div class="line">AnimatorSet.Builder builder = animatorSet.play(tv1BgAnimator);</div><div class="line">builder.with(tv1TranslateY);</div><div class="line">animatorSet.start();</div></pre></td></tr></table></figure>
<h5 id="2、AnimatorSet-Builder函数"><a href="#2、AnimatorSet-Builder函数" class="headerlink" title="2、AnimatorSet.Builder函数"></a>2、AnimatorSet.Builder函数</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//调用AnimatorSet中的play方法是获取AnimatorSet.Builder对象的唯一途径</span></div><div class="line"><span class="comment">//表示要播放哪个动画</span></div><div class="line"><span class="function"><span class="keyword">public</span> Builder <span class="title">play</span><span class="params">(Animator anim)</span></span></div><div class="line"><span class="comment">//和前面动画一起执行</span></div><div class="line"><span class="keyword">public</span> Builder <span class="title">with</span><span class="params">(Animator anim)</span></div><div class="line"><span class="comment">//执行前面的动画后才执行该动画</span></div><div class="line"><span class="keyword">public</span> Builder <span class="title">before</span><span class="params">(Animator anim)</span></div><div class="line"><span class="comment">//执行先执行这个动画再执行前面动画</span></div><div class="line"><span class="keyword">public</span> Builder <span class="title">after</span><span class="params">(Animator anim)</span></div><div class="line"><span class="comment">//延迟n毫秒之后执行动画</span></div><div class="line"><span class="keyword">public</span> Builder <span class="title">after</span><span class="params">(<span class="keyword">long</span> delay)</span></div></pre></td></tr></table></figure>
<h5 id="3、使用示例"><a href="#3、使用示例" class="headerlink" title="3、使用示例"></a>3、使用示例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ObjectAnimator tv1BgAnimator = ObjectAnimator.ofInt(mTv1, <span class="string">"BackgroundColor"</span>,  <span class="number">0xffff00ff</span>, <span class="number">0xffffff00</span>, <span class="number">0xffff00ff</span>);</div><div class="line">ObjectAnimator tv1TranslateY = ObjectAnimator.ofFloat(mTv1, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">0</span>);</div><div class="line">ObjectAnimator tv2TranslateY = ObjectAnimator.ofFloat(mTv2, <span class="string">"translationY"</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">AnimatorSet animatorSet = <span class="keyword">new</span> AnimatorSet();</div><div class="line">animatorSet.play(tv1TranslateY).with(tv2TranslateY).after(tv1BgAnimator);</div><div class="line">animatorSet.setDuration(<span class="number">2000</span>);</div><div class="line">animatorSet.start();</div></pre></td></tr></table></figure>
<h4 id="AnimatorSet监听器"><a href="#AnimatorSet监听器" class="headerlink" title="AnimatorSet监听器"></a>AnimatorSet监听器</h4><ul>
<li>1、AnimatorSet的监听函数也只是用来监听AnimatorSet的状态的，与其中的动画无关； </li>
<li>2、AnimatorSet中没有设置循环的函数，所以AnimatorSet监听器中永远无法运行到onAnimationRepeat()中！ </li>
</ul>
<h4 id="通用函数逐个设置与AnimatorSet设置的区别"><a href="#通用函数逐个设置与AnimatorSet设置的区别" class="headerlink" title="通用函数逐个设置与AnimatorSet设置的区别"></a>通用函数逐个设置与AnimatorSet设置的区别</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置单次动画时长</span></div><div class="line"><span class="function"><span class="keyword">public</span> AnimatorSet <span class="title">setDuration</span><span class="params">(<span class="keyword">long</span> duration)</span></span>;</div><div class="line"><span class="comment">//设置加速器</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInterpolator</span><span class="params">(TimeInterpolator interpolator)</span></span></div><div class="line"><span class="comment">//设置ObjectAnimator动画目标控件</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span></div></pre></td></tr></table></figure>
<p><strong>区别就是：</strong>在AnimatorSet中设置以后，会覆盖单个ObjectAnimator中的设置；即如果AnimatorSet中没有设置，那么就以ObjectAnimator中的设置为准。如果AnimatorSet中设置以后，ObjectAnimator中的设置就会无效。</p>
<h1 id="七、联合动画的XML实现与使用示例"><a href="#七、联合动画的XML实现与使用示例" class="headerlink" title="七、联合动画的XML实现与使用示例"></a>七、联合动画的XML实现与使用示例</h1><h3 id="1、联合动画的XML实现"><a href="#1、联合动画的XML实现" class="headerlink" title="1、联合动画的XML实现"></a>1、联合动画的XML实现</h3><p>在xml中对应animator总共有三个标签，分别是</p>
<pre><code>&lt;animator /&gt;:对应ValueAnimator
&lt;objectAnimator /&gt;:对应ObjectAnimator
&lt;set /&gt;:对应AnimatorSet
</code></pre><h4 id="1、animator"><a href="#1、animator" class="headerlink" title="1、animator"></a>1、animator</h4><h5 id="1-下面是完整的animator所有的字段及取值范围："><a href="#1-下面是完整的animator所有的字段及取值范围：" class="headerlink" title="(1)下面是完整的animator所有的字段及取值范围："></a>(1)下面是完整的animator所有的字段及取值范围：</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">animator</span></span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"int"</span></div><div class="line">    <span class="attr">android:valueFrom</span>=<span class="string">"float | int | color"</span></div><div class="line">    <span class="attr">android:valueTo</span>=<span class="string">"float | int | color"</span></div><div class="line">    <span class="attr">android:startOffset</span>=<span class="string">"int"</span></div><div class="line">    <span class="attr">android:repeatCount</span>=<span class="string">"int"</span></div><div class="line">    <span class="attr">android:repeatMode</span>=<span class="string">[</span>"<span class="attr">repeat</span>" | "<span class="attr">reverse</span>"]</div><div class="line">    <span class="attr">android:valueType</span>=<span class="string">[</span>"<span class="attr">intType</span>" | "<span class="attr">floatType</span>"]</div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">[</span>"@<span class="attr">android:interpolator</span>/<span class="attr">XXX</span>"]/&gt;</div></pre></td></tr></table></figure>
<ul>
<li><strong>android:duration</strong>:每次动画播放的时长</li>
<li><strong>android:valueFrom</strong>:初始动化值；取值范围为float,int和color，如果取值为float对应的值样式应该为89.0，取值为Int时，对应的值样式为：89;当取值为clolor时，对应的值样式为 #333333;</li>
<li><strong>android:valueTo</strong>：动画结束值；取值范围同样是float,int和color这三种类型的值；</li>
<li><strong>android:startOffset</strong>：动画激活延时；对应代码中的startDelay(long delay)函数；</li>
<li><strong>android:repeatCount</strong>：动画重复次数</li>
<li><strong>android:repeatMode</strong>：动画重复模式，取值为repeat和reverse；repeat表示正序重播，reverse表示倒序重播</li>
<li><strong>android:valueType</strong>：表示参数值类型，取值为intType和floatType；与android:valueFrom、android:valueTo相对应。如果这里的取值为intType，那么android:valueFrom、android:valueTo的值也就要对应的是int类型的数值。如果这里的数值是floatType，那么android:valueFrom、android:valueTo的值也要对应的设置为float类型的值。非常注意的是，如果android:valueFrom、android:valueTo的值设置为color类型的值，那么不需要设置这个参数；</li>
<li><strong>android:interpolator</strong>:设置加速器；有关系统加速器所对应的xml值对照表如下：<br><img src="http://ohtrrgyyd.bkt.clouddn.com/201702108384320160301085204774.jpg" alt="201702108384320160301085204774.jpg"></li>
</ul>
<h5 id="2-将xml加载到程序中"><a href="#2-将xml加载到程序中" class="headerlink" title="(2)将xml加载到程序中"></a>(2)将xml加载到程序中</h5><p>在定义了一个xml后，我们需要将其加载到程序中，使用的方法如下：</p>
<pre><code>ValueAnimator valueAnimator = (ValueAnimator) AnimatorInflater.loadAnimator(MyActivity.this,R.animator.animator);
valueAnimator.start();
</code></pre><h4 id="2、objectAnimator"><a href="#2、objectAnimator" class="headerlink" title="2、objectAnimator"></a>2、objectAnimator</h4><h5 id="1-字段意义及使用方法"><a href="#1-字段意义及使用方法" class="headerlink" title="(1)字段意义及使用方法"></a>(1)字段意义及使用方法</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">objectAnimator</span></span></div><div class="line">    <span class="attr">android:propertyName</span>=<span class="string">"string"</span></div><div class="line">    <span class="attr">android:duration</span>=<span class="string">"int"</span></div><div class="line">    <span class="attr">android:valueFrom</span>=<span class="string">"float | int | color"</span></div><div class="line">    <span class="attr">android:valueTo</span>=<span class="string">"float | int | color"</span></div><div class="line">    <span class="attr">android:startOffset</span>=<span class="string">"int"</span></div><div class="line">    <span class="attr">android:repeatCount</span>=<span class="string">"int"</span></div><div class="line">    <span class="attr">android:repeatMode</span>=<span class="string">[</span>"<span class="attr">repeat</span>" | "<span class="attr">reverse</span>"]</div><div class="line">    <span class="attr">android:valueType</span>=<span class="string">[</span>"<span class="attr">intType</span>" | "<span class="attr">floatType</span>"]</div><div class="line">    <span class="attr">android:interpolator</span>=<span class="string">[</span>"@<span class="attr">android:interpolator</span>/<span class="attr">XXX</span>"]/&gt;</div></pre></td></tr></table></figure>
<ul>
<li>android:propertyName：对应属性名，即ObjectAnimator所需要操作的属性名。<br>其它字段的意义与animator的意义与取值是一样的，下面再重新列举一下。 </li>
<li>android:duration:每次动画播放的时长 </li>
<li>android:valueFrom:初始动化值；取值范围为float,int和color； </li>
<li>android:valueTo：动画结束值；取值范围同样是float,int和color这三种类型的值； </li>
<li>android:startOffset：动画激活延时；对应代码中的startDelay(long delay)函数； </li>
<li>android:repeatCount：动画重复次数 </li>
<li>android:repeatMode：动画重复模式，取值为repeat和reverse；repeat表示正序重播，reverse表示倒序重播 </li>
<li>android:valueType：表示参数值类型，取值为intType和floatType；与android:valueFrom、android:valueTo相对应。如果这里的取值为intType，那么android:valueFrom、android:valueTo的值也就要对应的是int类型的数值。如果这里的数值是floatType，那么android:valueFrom、android:valueTo的值也要对应的设置为float类型的值。非常注意的是，如果android:valueFrom、android:valueTo的值设置为color类型的值，那么不需要设置这个参数； </li>
<li>android:interpolator:设置加速器。</li>
</ul>
<h5 id="2-将xml加载到程序中-1"><a href="#2-将xml加载到程序中-1" class="headerlink" title="(2)将xml加载到程序中"></a>(2)将xml加载到程序中</h5><pre><code>ObjectAnimator animator = (ObjectAnimator) AnimatorInflater.loadAnimator(MyActivity.this,
    R.animator.object_animator);
animator.setTarget(mTv1);
animator.start();
</code></pre><h4 id="3、set"><a href="#3、set" class="headerlink" title="3、set"></a>3、set</h4><h5 id="1-字段意义及使用方法-1"><a href="#1-字段意义及使用方法-1" class="headerlink" title="(1)字段意义及使用方法"></a>(1)字段意义及使用方法</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span></span></div><div class="line">  <span class="attr">android:ordering</span>=<span class="string">[</span>"<span class="attr">together</span>" | "<span class="attr">sequentially</span>"]&gt;</div></pre></td></tr></table></figure>
<p>android:ordering：表示动画开始顺序。together表示同时开始动画，sequentially表示逐个开始动画； </p>
<h5 id="2-将xml加载到程序中-2"><a href="#2-将xml加载到程序中-2" class="headerlink" title="(2)将xml加载到程序中"></a>(2)将xml加载到程序中</h5><pre><code>AnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(MyActivity.this,
    R.animator.set_animator);
set.setTarget(mTv1);
set.start();
</code></pre><h3 id="2、AnimatorSet应用"><a href="#2、AnimatorSet应用" class="headerlink" title="2、AnimatorSet应用"></a>2、AnimatorSet应用</h3><p>应用AnimatorSet例子效果：<br><img src="http://ohtrrgyyd.bkt.clouddn.com/201702102971920160301085911065.gif" alt="201702102971920160301085911065.gif"></p>
<p>我们先来分析下这个效果，在用户点击按钮时，把菜单弹出来；弹出来的时候，动画一点从小变到大，一边透明度从0变到1.关键问题是，怎么样实现各个菜单以当前点击按钮为圆心排列在圆形上；</p>
<p><strong>布局代码：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">             <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">             <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">             <span class="attr">android:layout_marginBottom</span>=<span class="string">"10dp"</span></div><div class="line">             <span class="attr">android:layout_marginRight</span>=<span class="string">"10dp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/menu"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"@style/MenuStyle"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/menu"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/item1"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"@style/MenuItemStyle"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/circle1"</span></div><div class="line">            <span class="attr">android:visibility</span>=<span class="string">"gone"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/item2"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"@style/MenuItemStyle"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/circle2"</span></div><div class="line">            <span class="attr">android:visibility</span>=<span class="string">"gone"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/item3"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"@style/MenuItemStyle"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/circle3"</span></div><div class="line">            <span class="attr">android:visibility</span>=<span class="string">"gone"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/item4"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"@style/MenuItemStyle"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/circle4"</span></div><div class="line">            <span class="attr">android:visibility</span>=<span class="string">"gone"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/item5"</span></div><div class="line">            <span class="attr">style</span>=<span class="string">"@style/MenuItemStyle"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@drawable/circle5"</span></div><div class="line">            <span class="attr">android:visibility</span>=<span class="string">"gone"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>其中的style代码为：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"MenuStyle"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_width"</span>&gt;</span>50dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_height"</span>&gt;</span>50dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_gravity"</span>&gt;</span>right|bottom<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"MenuItemStyle"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_width"</span>&gt;</span>45dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_height"</span>&gt;</span>45dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_gravity"</span>&gt;</span>right|bottom<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>MyActivity.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MainActivity"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Button mMenuButton;</div><div class="line">    <span class="keyword">private</span> Button mItemButton1;</div><div class="line">    <span class="keyword">private</span> Button mItemButton2;</div><div class="line">    <span class="keyword">private</span> Button mItemButton3;</div><div class="line">    <span class="keyword">private</span> Button mItemButton4;</div><div class="line">    <span class="keyword">private</span> Button mItemButton5;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsMenuOpen = <span class="keyword">false</span>;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line">        initView();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</div><div class="line">        mMenuButton = (Button) findViewById(R.id.menu);</div><div class="line">        mMenuButton.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        mItemButton1 = (Button) findViewById(R.id.item1);</div><div class="line">        mItemButton1.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        mItemButton2 = (Button) findViewById(R.id.item2);</div><div class="line">        mItemButton2.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        mItemButton3 = (Button) findViewById(R.id.item3);</div><div class="line">        mItemButton3.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        mItemButton4 = (Button) findViewById(R.id.item4);</div><div class="line">        mItemButton4.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        mItemButton5 = (Button) findViewById(R.id.item5);</div><div class="line">        mItemButton5.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (v == mMenuButton) &#123;</div><div class="line">            <span class="keyword">if</span> (!mIsMenuOpen) &#123;</div><div class="line">                mIsMenuOpen = <span class="keyword">true</span>;</div><div class="line">                doAnimateOpen(mItemButton1, <span class="number">0</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateOpen(mItemButton2, <span class="number">1</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateOpen(mItemButton3, <span class="number">2</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateOpen(mItemButton4, <span class="number">3</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateOpen(mItemButton5, <span class="number">4</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                mIsMenuOpen = <span class="keyword">false</span>;</div><div class="line">                doAnimateClose(mItemButton1, <span class="number">0</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateClose(mItemButton2, <span class="number">1</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateClose(mItemButton3, <span class="number">2</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateClose(mItemButton4, <span class="number">3</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">                doAnimateClose(mItemButton5, <span class="number">4</span>, <span class="number">5</span>, <span class="number">300</span>);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            Toast.makeText(<span class="keyword">this</span>, <span class="string">"你点击了"</span> + v, Toast.LENGTH_SHORT).show();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAnimateOpen</span><span class="params">(View view, <span class="keyword">int</span> index, <span class="keyword">int</span> total, <span class="keyword">int</span> radius)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (view.getVisibility() != View.VISIBLE) &#123;</div><div class="line">        view.setVisibility(View.VISIBLE);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">double</span> degree = Math.toRadians(<span class="number">90</span>)/(total - <span class="number">1</span>) * index;</div><div class="line">    <span class="keyword">int</span> translationX = -(<span class="keyword">int</span>) (radius * Math.sin(degree));</div><div class="line">    <span class="keyword">int</span> translationY = -(<span class="keyword">int</span>) (radius * Math.cos(degree));</div><div class="line"></div><div class="line">    AnimatorSet set = <span class="keyword">new</span> AnimatorSet();</div><div class="line">    <span class="comment">//包含平移、缩放和透明度动画</span></div><div class="line">    set.playTogether(</div><div class="line">            ObjectAnimator.ofFloat(view, <span class="string">"translationX"</span>, <span class="number">0</span>, translationX),</div><div class="line">            ObjectAnimator.ofFloat(view, <span class="string">"translationY"</span>, <span class="number">0</span>, translationY),</div><div class="line">            ObjectAnimator.ofFloat(view, <span class="string">"scaleX"</span>, <span class="number">0f</span>, <span class="number">1f</span>),</div><div class="line">            ObjectAnimator.ofFloat(view, <span class="string">"scaleY"</span>, <span class="number">0f</span>, <span class="number">1f</span>),</div><div class="line">            ObjectAnimator.ofFloat(view, <span class="string">"alpha"</span>, <span class="number">0f</span>, <span class="number">1</span>));</div><div class="line">    <span class="comment">//动画周期为500ms</span></div><div class="line">    set.setDuration(<span class="number">1</span> * <span class="number">500</span>).start();</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doAnimateClose</span><span class="params">(<span class="keyword">final</span> View view, <span class="keyword">int</span> index, <span class="keyword">int</span> total,<span class="keyword">int</span> radius)</span> </span>&#123;</div><div class="line">   		<span class="keyword">if</span> (view.getVisibility() != View.VISIBLE) &#123;</div><div class="line">       	view.setVisibility(View.VISIBLE);</div><div class="line">   		&#125;</div><div class="line">   		<span class="keyword">double</span> degree = Math.PI * index / ((total - <span class="number">1</span>) * <span class="number">2</span>);</div><div class="line">   		<span class="keyword">int</span> translationX = -(<span class="keyword">int</span>) (radius * Math.sin(degree));</div><div class="line">   		<span class="keyword">int</span> translationY = -(<span class="keyword">int</span>) (radius * Math.cos(degree));</div><div class="line">   		AnimatorSet set = <span class="keyword">new</span> AnimatorSet();</div><div class="line">   		<span class="comment">//包含平移、缩放和透明度动画</span></div><div class="line">   		set.playTogether(</div><div class="line">           ObjectAnimator.ofFloat(view, <span class="string">"translationX"</span>, translationX, <span class="number">0</span>),</div><div class="line">           ObjectAnimator.ofFloat(view, <span class="string">"translationY"</span>, translationY, <span class="number">0</span>),</div><div class="line">           ObjectAnimator.ofFloat(view, <span class="string">"scaleX"</span>, <span class="number">1f</span>, <span class="number">0.1f</span>),</div><div class="line">           ObjectAnimator.ofFloat(view, <span class="string">"scaleY"</span>, <span class="number">1f</span>, <span class="number">0.1f</span>),</div><div class="line">           ObjectAnimator.ofFloat(view, <span class="string">"alpha"</span>, <span class="number">1f</span>, <span class="number">0f</span>));</div><div class="line"></div><div class="line">   			set.setDuration(<span class="number">1</span> * <span class="number">500</span>).start();</div><div class="line">		&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="一、LayoutAnimation的xml实现——layoutAnimation标签"><a href="#一、LayoutAnimation的xml实现——layoutAnimation标签" class="headerlink" title="一、LayoutAnimation的xml实现——layoutAnimation标签"></a>一、LayoutAnimation的xml实现——layoutAnimation标签</h3><h4 id="1、概述-2"><a href="#1、概述-2" class="headerlink" title="1、概述"></a>1、概述</h4><p>这部分，我们就来看看layoutAnimation标签的用法，要使用layoutAnimation只需要两步：<br><strong>第一：定义一个layoutAnimation的animation文件，如：(anim/layout_animation.xml)</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">layoutAnimation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">                 <span class="attr">android:delay</span>=<span class="string">"1"</span></div><div class="line">                 <span class="attr">android:animationOrder</span>=<span class="string">"normal"</span></div><div class="line">                 <span class="attr">android:animation</span>=<span class="string">"@anim/slide_in_left"</span>/&gt;</div></pre></td></tr></table></figure>
<p><strong>第二步：在viewGroup类型的控件中，添加Android:layoutAnimation=”@anim/layout_animation”，如：</strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ListView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/listview"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layoutAnimation</span>=<span class="string">"@anim/layout_animation"</span></div><div class="line">        /&gt;</div></pre></td></tr></table></figure></p>
<p><strong>注意</strong>我们可以知道最重要的一点：android:layoutAnimation只在viewGroup创建的时候，才会对其中的item添加动画。在创建成功以后，再向其中添加item将不会再有动画。</p>
<h4 id="2、layoutAnimation各字段意义"><a href="#2、layoutAnimation各字段意义" class="headerlink" title="2、layoutAnimation各字段意义"></a>2、layoutAnimation各字段意义</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">layoutAnimation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">                 <span class="attr">android:delay</span>=<span class="string">"1"</span></div><div class="line">                 <span class="attr">android:animationOrder</span>=<span class="string">"normal"</span></div><div class="line">                 <span class="attr">android:animation</span>=<span class="string">"@anim/slide_in_left"</span>/&gt;</div></pre></td></tr></table></figure>
<ul>
<li>delay:指每个Item的动画开始延时，取值是android:animation所指定动画时长的倍数，取值类型可以是float类型，也可以是百分数，默认是0.5;比如我们这里指定的动画是@anim/slide_in_left，而在slide_in_left.xml中指定android:duration=”1000”，即单次动画的时长是1000毫秒，而我们在这里的指定android:delay=”1”，即一个Item的动画会在上一个item动画完成后延时单次动画时长的一倍时间开始，即延时1000毫秒后开始。</li>
<li>animationOrder:指viewGroup中的控件动画开始顺序，取值有normal(正序)、reverse(倒序)、random(随机)</li>
<li>animation：指定每个item入场所要应用的动画。仅能指定res/aim文件夹下的animation定义的动画，不可使用animator动画。</li>
</ul>
<h3 id="二、LayoutAnimation的代码实现——LayoutAnimationController"><a href="#二、LayoutAnimation的代码实现——LayoutAnimationController" class="headerlink" title="二、LayoutAnimation的代码实现——LayoutAnimationController"></a>二、LayoutAnimation的代码实现——LayoutAnimationController</h3><h4 id="1、构造函数"><a href="#1、构造函数" class="headerlink" title="1、构造函数"></a>1、构造函数</h4><pre><code>public LayoutAnimationController(Animation animation)
public LayoutAnimationController(Animation animation, float delay)
</code></pre><h4 id="2、基本函数"><a href="#2、基本函数" class="headerlink" title="2、基本函数"></a>2、基本函数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置animation动画</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAnimation</span><span class="params">(Animation animation)</span></span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置单个item开始动画延时</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDelay</span><span class="params">(<span class="keyword">float</span> delay)</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置viewGroup中控件开始动画顺序，取值为ORDER_NORMAL、ORDER_REVERSE、ORDER_RANDOM</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrder</span><span class="params">(<span class="keyword">int</span> order)</span></div></pre></td></tr></table></figure>
<h4 id="3、示例"><a href="#3、示例" class="headerlink" title="3、示例"></a>3、示例</h4><p>同样以上面的例子为例，把xml实现改成代码实现。由于我们要代码实现layoutAnimation，所以我们不再需要写layoutAnimation的xml了，只需要一个动画的animation:(slide_in_left.xml)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> <span class="attr">android:duration</span>=<span class="string">"1000"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span> <span class="attr">android:fromXDelta</span>=<span class="string">"-50%p"</span> <span class="attr">android:toXDelta</span>=<span class="string">"0"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span> <span class="attr">android:fromAlpha</span>=<span class="string">"0.0"</span> <span class="attr">android:toAlpha</span>=<span class="string">"1.0"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后是主布局（main.xml）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/addlist"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"添加list数据"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/listview"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最后我们来看看代码(MyActivity.Java)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ListView mListView;</div><div class="line">    <span class="keyword">private</span> ArrayAdapter mAdapter;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Button mAddListBtn;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line"></div><div class="line">        mListView = (ListView) findViewById(R.id.listview);</div><div class="line">        mAdapter = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(<span class="keyword">this</span>, android.R.layout.simple_expandable_list_item_1, getData());</div><div class="line">        mListView.setAdapter(mAdapter);</div><div class="line"></div><div class="line">        mAddListBtn = (Button)findViewById(R.id.addlist);</div><div class="line">        mAddListBtn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                mAdapter.addAll(getData());</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">//代码设置通过加载XML动画设置文件来创建一个Animation对象；</span></div><div class="line">        Animation animation= AnimationUtils.loadAnimation(<span class="keyword">this</span>,R.anim.slide_in_left);   <span class="comment">//得到一个LayoutAnimationController对象；</span></div><div class="line">        LayoutAnimationController controller = <span class="keyword">new</span> LayoutAnimationController(animation);   <span class="comment">//设置控件显示的顺序；</span></div><div class="line">        controller.setOrder(LayoutAnimationController.ORDER_REVERSE);   <span class="comment">//设置控件显示间隔时间；</span></div><div class="line">        controller.setDelay(<span class="number">0.3f</span>);   <span class="comment">//为ListView设置LayoutAnimationController属性；</span></div><div class="line">        mListView.setLayoutAnimation(controller);</div><div class="line">        mListView.startLayoutAnimation();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getData</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        List&lt;String&gt; data = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        data.add(<span class="string">"测试数据1"</span>);</div><div class="line">        data.add(<span class="string">"测试数据2"</span>);</div><div class="line">        data.add(<span class="string">"测试数据3"</span>);</div><div class="line">        data.add(<span class="string">"测试数据4"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> data;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="三、GridLayoutAnimation的XML实现——gridLayoutAnimation"><a href="#三、GridLayoutAnimation的XML实现——gridLayoutAnimation" class="headerlink" title="三、GridLayoutAnimation的XML实现——gridLayoutAnimation"></a>三、GridLayoutAnimation的XML实现——gridLayoutAnimation</h3><p>这部分将给大家讲解有关gridview给内部子控件添加创建动画的内容。<br><img src="http://ohtrrgyyd.bkt.clouddn.com/201702101476120160303084028875.gif" alt="201702101476120160303084028875.gif"></p>
<h4 id="1、标签属性"><a href="#1、标签属性" class="headerlink" title="1、标签属性"></a>1、标签属性</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">gridLayoutAnimation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">                     <span class="attr">android:rowDelay</span>=<span class="string">"75%"</span></div><div class="line">                     <span class="attr">android:columnDelay</span>=<span class="string">"60%"</span></div><div class="line">                     <span class="attr">android:directionPriority</span>=<span class="string">"none"</span></div><div class="line">                     <span class="attr">android:direction</span>=<span class="string">"bottom_to_top|right_to_left"</span></div><div class="line">                     <span class="attr">android:animation</span>=<span class="string">"@android:anim/slide_in_left"</span>/&gt;</div></pre></td></tr></table></figure>
<ul>
<li><strong>rowDelay</strong>:每一行动画开始的延迟。与LayoutAnimation一样，可以取百分数，也可以取浮点数。取值意义为，当前android:animation所指动画时长的倍数。 </li>
<li><strong>columnDelay</strong>：每一列动画开始的延迟。取值类型及意义与rowDelay相同。 </li>
<li><strong>directionPriority</strong>：方向优先级。取值为row,collumn,none，意义分别为：行优先，列优先，和无优先级（同时进行）;具体意义，后面会细讲 </li>
<li><strong>direction</strong>：gridview动画方向。<br>取值有四个：left_to_right：列，从左向右开始动画<br>right_to_left ：列，从右向左开始动画<br>top_to_bottom：行，从上向下开始动画<br>bottom_to_top：行，从下向上开始动画<br>这四个值之间可以通过“|”连接，从而可以取多个值。很显然left_to_right和right_to_left是互斥的，top_to_bottom和bottom_to_top是互斥的。如果不指定 direction字段，默认值为left_to_right | top_to_bottom；即从上往下，从左往右。 </li>
<li><strong>animation</strong>: gridview内部元素所使用的动画。</li>
</ul>
<h4 id="2、示例-1"><a href="#2、示例-1" class="headerlink" title="2、示例"></a>2、示例</h4><h5 id="1-、首先是gride-animation-xml"><a href="#1-、首先是gride-animation-xml" class="headerlink" title="(1)、首先是gride_animation.xml"></a>(1)、首先是gride_animation.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">gridLayoutAnimation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">                     <span class="attr">android:rowDelay</span>=<span class="string">"75%"</span></div><div class="line">                     <span class="attr">android:columnDelay</span>=<span class="string">"60%"</span></div><div class="line">                     <span class="attr">android:directionPriority</span>=<span class="string">"none"</span></div><div class="line">                     <span class="attr">android:animation</span>=<span class="string">"@anim/slide_in_left"</span>/&gt;</div></pre></td></tr></table></figure>
<p><strong>这里没有设置android:direction属性，采用默认值：left_to_right|top_to_bottom；然后是对应的animation动画slide_in_left.xml:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> <span class="attr">android:duration</span>=<span class="string">"1000"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span> <span class="attr">android:fromXDelta</span>=<span class="string">"-50%p"</span> <span class="attr">android:toXDelta</span>=<span class="string">"0"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span> <span class="attr">android:fromAlpha</span>=<span class="string">"0.0"</span> <span class="attr">android:toAlpha</span>=<span class="string">"1.0"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="2-、程序布局main-xml"><a href="#2-、程序布局main-xml" class="headerlink" title="(2)、程序布局main.xml"></a>(2)、程序布局main.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/add_data"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"添加grid数据"</span>/&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">GridView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/grid"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:columnWidth</span>=<span class="string">"60dp"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:horizontalSpacing</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:layoutAnimation</span>=<span class="string">"@anim/gride_animation"</span></div><div class="line">            <span class="attr">android:numColumns</span>=<span class="string">"auto_fit"</span></div><div class="line">            <span class="attr">android:stretchMode</span>=<span class="string">"columnWidth"</span></div><div class="line">            <span class="attr">android:verticalSpacing</span>=<span class="string">"10dp"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="3-、代码处理"><a href="#3-、代码处理" class="headerlink" title="(3)、代码处理"></a>(3)、代码处理</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> GridAdapter mGrideAdapter;</div><div class="line">    <span class="keyword">private</span> List&lt;String&gt; mDatas = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * 填充gridview</div><div class="line">         */</div><div class="line">        GridView grid = (GridView) findViewById(R.id.grid);</div><div class="line">        mDatas.addAll(getData());</div><div class="line">        mGrideAdapter = <span class="keyword">new</span> GridAdapter();</div><div class="line">        grid.setAdapter(mGrideAdapter);</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * 按钮点击响应</div><div class="line">         */</div><div class="line">        Button addData = (Button)findViewById(R.id.add_data);</div><div class="line">        addData.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                addData();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getData</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        List&lt;String&gt; data = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;<span class="number">35</span>;i++)&#123;</div><div class="line">            data.add(<span class="string">"DATA "</span>+i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> data;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addData</span><span class="params">()</span></span>&#123;</div><div class="line">        mDatas.addAll(mDatas);</div><div class="line">        mGrideAdapter.notifyDataSetChanged();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GridAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">            TextView i = <span class="keyword">new</span> TextView(MyActivity.<span class="keyword">this</span>);</div><div class="line">            i.setText(mDatas.get(position));</div><div class="line">            i.setLayoutParams(<span class="keyword">new</span> GridView.LayoutParams(GridView.LayoutParams.WRAP_CONTENT, GridView.LayoutParams.WRAP_CONTENT));</div><div class="line">            <span class="keyword">return</span> i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> mDatas.size();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> position;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="四、GridLayoutAnimation的代码实现——GridLayoutAnimationController"><a href="#四、GridLayoutAnimation的代码实现——GridLayoutAnimationController" class="headerlink" title="四、GridLayoutAnimation的代码实现——GridLayoutAnimationController"></a>四、GridLayoutAnimation的代码实现——GridLayoutAnimationController</h3><h4 id="1、构造函数-1"><a href="#1、构造函数-1" class="headerlink" title="1、构造函数"></a>1、构造函数</h4><pre><code>public GridLayoutAnimationController(Animation animation)
public GridLayoutAnimationController(Animation animation, float columnDelay, float rowDelay)
</code></pre><h4 id="2、其他方法"><a href="#2、其他方法" class="headerlink" title="2、其他方法"></a>2、其他方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置列动画开始延迟</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColumnDelay</span><span class="params">(<span class="keyword">float</span> columnDelay)</span></span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 设置行动画开始延迟</div><div class="line"> */</div><div class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRowDelay</span><span class="params">(<span class="keyword">float</span> rowDelay)</span></div><div class="line"> <span class="comment">/**</span></div><div class="line"> * 设置gridview动画的入场方向。取值有：DIRECTION_BOTTOM_TO_TOP、DIRECTION_TOP_TO_BOTTOM、DIRECTION_LEFT_TO_RIGHT、DIRECTION_RIGHT_TO_LEFT</div><div class="line"> */</div><div class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDirection</span><span class="params">(<span class="keyword">int</span> direction)</span></div><div class="line"> <span class="comment">/**</span></div><div class="line"> * 动画开始优先级，取值有PRIORITY_COLUMN、PRIORITY_NONE、PRIORITY_ROW</div><div class="line"> */</div><div class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDirectionPriority</span><span class="params">(<span class="keyword">int</span> directionPriority)</span></div></pre></td></tr></table></figure>
<h4 id="3、示例-1"><a href="#3、示例-1" class="headerlink" title="3、示例"></a>3、示例</h4><p>创建一个slide_in_left.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> <span class="attr">android:duration</span>=<span class="string">"1000"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span> <span class="attr">android:fromXDelta</span>=<span class="string">"-50%p"</span> <span class="attr">android:toXDelta</span>=<span class="string">"0"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span> <span class="attr">android:fromAlpha</span>=<span class="string">"0.0"</span> <span class="attr">android:toAlpha</span>=<span class="string">"1.0"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">```	</div><div class="line"></div><div class="line">然后是布局文件main.xml:</div><div class="line"></div><div class="line">``` xml</div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">GridView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/grid"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:columnWidth</span>=<span class="string">"60dp"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">            <span class="attr">android:horizontalSpacing</span>=<span class="string">"10dp"</span></div><div class="line">            <span class="attr">android:numColumns</span>=<span class="string">"auto_fit"</span></div><div class="line">            <span class="attr">android:stretchMode</span>=<span class="string">"columnWidth"</span></div><div class="line">            <span class="attr">android:verticalSpacing</span>=<span class="string">"10dp"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最后是MyActivity中的填充部分：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> GridAdapter mGrideAdapter;</div><div class="line">    <span class="keyword">private</span> List&lt;String&gt; mDatas = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.main);</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * 填充gridview</div><div class="line">         */</div><div class="line">        GridView grid = (GridView) findViewById(R.id.grid);</div><div class="line">        mDatas.addAll(getData());</div><div class="line">        mGrideAdapter = <span class="keyword">new</span> GridAdapter();</div><div class="line">        grid.setAdapter(mGrideAdapter);</div><div class="line"></div><div class="line">        Animation animation = AnimationUtils.loadAnimation(MyActivity.<span class="keyword">this</span>,R.anim.slide_in_left);</div><div class="line">        GridLayoutAnimationController controller = <span class="keyword">new</span> GridLayoutAnimationController(animation);</div><div class="line">        controller.setColumnDelay(<span class="number">0.75f</span>);</div><div class="line">        controller.setRowDelay(<span class="number">0.5f</span>);</div><div class="line">        controller.setDirection(GridLayoutAnimationController.DIRECTION_BOTTOM_TO_TOP|GridLayoutAnimationController.DIRECTION_LEFT_TO_RIGHT);</div><div class="line">        controller.setDirectionPriority(GridLayoutAnimationController.PRIORITY_NONE);</div><div class="line">        grid.setLayoutAnimation(controller);</div><div class="line">        grid.startLayoutAnimation();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getData</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        List&lt;String&gt; data = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;<span class="number">35</span>;i++)&#123;</div><div class="line">            data.add(<span class="string">"DATA "</span>+i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> data;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addData</span><span class="params">()</span></span>&#123;</div><div class="line">        mDatas.addAll(mDatas);</div><div class="line">        mGrideAdapter.notifyDataSetChanged();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GridAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class="line">            TextView i = <span class="keyword">new</span> TextView(MyActivity.<span class="keyword">this</span>);</div><div class="line">            i.setText(mDatas.get(position));</div><div class="line">            i.setLayoutParams(<span class="keyword">new</span> GridView.LayoutParams(GridView.LayoutParams.WRAP_CONTENT, GridView.LayoutParams.WRAP_CONTENT));</div><div class="line">            <span class="keyword">return</span> i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> mDatas.size();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> position;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="八、animateLayoutChanges与LayoutTransition"><a href="#八、animateLayoutChanges与LayoutTransition" class="headerlink" title="八、animateLayoutChanges与LayoutTransition"></a>八、animateLayoutChanges与LayoutTransition</h1><p>之前说的LayoutAnimation虽能实现ViewGroup的进入动画，但只能在创建时有效。在创建后，再往里添加控件就不会再有动画。在API 11后，又添加了两个能实现在创建后添加控件仍能应用动画的方法，分别是Android:animateLayoutChanges属性和LayoutTransition类。</p>
<h3 id="一、android-animateLayoutChanges属性"><a href="#一、android-animateLayoutChanges属性" class="headerlink" title="一、android:animateLayoutChanges属性"></a>一、android:animateLayoutChanges属性</h3><p>所有派生自ViewGroup的控件都具有此属性，只要在XML中添加上这个属性，就能实现添加/删除其中控件时，带有默认动画了。</p>
<p><img src="http://ohtrrgyyd.bkt.clouddn.com/201702101887320160326102726242.gif" alt="201702101887320160326102726242.gif"></p>
<h4 id="1、简单示例"><a href="#1、简单示例" class="headerlink" title="1、简单示例"></a>1、简单示例</h4><h5 id="1、main-xml布局代码"><a href="#1、main-xml布局代码" class="headerlink" title="1、main.xml布局代码"></a>1、main.xml布局代码</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>  </span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>  </div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;  </div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span>  </span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>  </div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span>&gt;  </div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">Button</span>  </span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/add_btn"</span>  </div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>  </div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>  </div><div class="line">                <span class="attr">android:text</span>=<span class="string">"添加控件"</span>/&gt;  </div><div class="line">  </div><div class="line">        <span class="tag">&lt;<span class="name">Button</span>  </span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/remove_btn"</span>  </div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span>  </div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>  </div><div class="line">                <span class="attr">android:text</span>=<span class="string">"移除控件"</span>/&gt;  </div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span>  </div><div class="line">  </div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span>  </span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/layoutTransitionGroup"</span>  </div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>  </div><div class="line">            <span class="attr">android:animateLayoutChanges</span>=<span class="string">"true"</span>  </div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>/&gt;  </div><div class="line">  </div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="2、MyActivity代码"><a href="#2、MyActivity代码" class="headerlink" title="2、MyActivity代码"></a>2、MyActivity代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> LinearLayout layoutTransitionGroup;  </div><div class="line">  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.main);  </div><div class="line">  </div><div class="line">        layoutTransitionGroup = (LinearLayout) findViewById(R.id.layoutTransitionGroup);  </div><div class="line">        findViewById(R.id.add_btn).setOnClickListener(<span class="keyword">this</span>);  </div><div class="line">        findViewById(R.id.remove_btn).setOnClickListener(<span class="keyword">this</span>);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addButtonView</span><span class="params">()</span> </span>&#123;  </div><div class="line">        i++;  </div><div class="line">        Button button = <span class="keyword">new</span> Button(<span class="keyword">this</span>);  </div><div class="line">        button.setText(<span class="string">"button"</span> + i);  </div><div class="line">        LinearLayout.LayoutParams params = <span class="keyword">new</span> LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,  </div><div class="line">                ViewGroup.LayoutParams.WRAP_CONTENT);  </div><div class="line">        button.setLayoutParams(params);  </div><div class="line">        layoutTransitionGroup.addView(button, <span class="number">0</span>);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">removeButtonView</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;  </div><div class="line">            layoutTransitionGroup.removeViewAt(<span class="number">0</span>);  </div><div class="line">        &#125;  </div><div class="line">        i--;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">        <span class="keyword">if</span> (v.getId() == R.id.add_btn) &#123;  </div><div class="line">            addButtonView();  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">if</span> (v.getId() == R.id.remove_btn) &#123;  </div><div class="line">            removeButtonView();  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="二、LayoutTransaction"><a href="#二、LayoutTransaction" class="headerlink" title="二、LayoutTransaction"></a>二、LayoutTransaction</h3><h4 id="1、概述-3"><a href="#1、概述-3" class="headerlink" title="1、概述"></a>1、概述</h4><p>上面虽然在ViewGroup类控件XML中仅添加一行android:animateLayoutChanges=[true]即可实现内部控件添加删除时都加上动画效果。但却只能使用默认动画效果，而无法自定义动画。<br>为了能让我们自定义动画，谷歌在API 11时，同时为我们引入了一个类LayoutTransaction。<br>要使用LayoutTransaction是非常容易的，只需要三步：</p>
<h5 id="第一步：创建实例"><a href="#第一步：创建实例" class="headerlink" title="第一步：创建实例"></a>第一步：创建实例</h5><pre><code>LayoutTransaction transitioner = new LayoutTransition();
</code></pre><h5 id="第二步：创建动画并设置"><a href="#第二步：创建动画并设置" class="headerlink" title="第二步：创建动画并设置"></a>第二步：创建动画并设置</h5><pre><code>ObjectAnimator animOut = ObjectAnimator.ofFloat(null, &quot;rotation&quot;, 0f, 90f, 0f);  
transitioner.setAnimator(LayoutTransition.DISAPPEARING, animOut);
</code></pre><h5 id="第三步：将LayoutTransaction设置进ViewGroup"><a href="#第三步：将LayoutTransaction设置进ViewGroup" class="headerlink" title="第三步：将LayoutTransaction设置进ViewGroup"></a>第三步：将LayoutTransaction设置进ViewGroup</h5><pre><code>linearLayout.setLayoutTransition(mTransitioner); 
</code></pre><p>在第二步中，transitioner.setAnimator设置动画的函数声明为：</p>
<pre><code>public void setAnimator(int transitionType, Animator animator)
</code></pre><p>第一个参数int transitionType：表示当前应用动画的对象范围，取值有：</p>
<ul>
<li>APPEARING —— 元素在容器中出现时所定义的动画。</li>
<li>DISAPPEARING —— 元素在容器中消失时所定义的动画。</li>
<li>CHANGE_APPEARING —— 由于容器中要显现一个新的元素，其它需要变化的元素所应用的动画</li>
<li>CHANGE_DISAPPEARING —— 当容器中某个元素消失，其它需要变化的元素所应用的动画 </li>
</ul>
<h4 id="2、LayoutTransition-CHANGE-APPEARING与LayoutTransition-CHANGE-DISAPPEARING"><a href="#2、LayoutTransition-CHANGE-APPEARING与LayoutTransition-CHANGE-DISAPPEARING" class="headerlink" title="2、LayoutTransition.CHANGE_APPEARING与LayoutTransition.CHANGE_DISAPPEARING"></a>2、LayoutTransition.CHANGE_APPEARING与LayoutTransition.CHANGE_DISAPPEARING</h4><p>在添加控件时，除了被添加控件本身的入场动画以外，其它需要移动位置的控件，在移动位置时，也被添加上了动画（left点位移动画），这些除了被添加控件以外的其它需要移动位置的控件组合，所对应的动画就是LayoutTransition.CHANGE_APPEARING<br>同样，在移除一个控件时，因为移除了一个控件，而其它所有需要改变位置的控件组合所对应的动画就是LayoutTransition.CHANGE_DISAPPEARING</p>
<h5 id="LayoutTransition-CHANGE-APPEARING实现"><a href="#LayoutTransition-CHANGE-APPEARING实现" class="headerlink" title="LayoutTransition.CHANGE_APPEARING实现"></a>LayoutTransition.CHANGE_APPEARING实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">    setContentView(R.layout.main);  </div><div class="line">  </div><div class="line">    layoutTransitionGroup = (LinearLayout) findViewById(R.id.layoutTransitionGroup);  </div><div class="line">    findViewById(R.id.add_btn).setOnClickListener(<span class="keyword">this</span>);  </div><div class="line">    findViewById(R.id.remove_btn).setOnClickListener(<span class="keyword">this</span>);  </div><div class="line">  </div><div class="line">    mTransitioner = <span class="keyword">new</span> LayoutTransition();  </div><div class="line">    <span class="comment">//入场动画:view在这个容器中消失时触发的动画  </span></div><div class="line">    ObjectAnimator animIn = ObjectAnimator.ofFloat(<span class="keyword">null</span>, <span class="string">"rotationY"</span>, <span class="number">0f</span>, <span class="number">360f</span>,<span class="number">0f</span>);  </div><div class="line">    mTransitioner.setAnimator(LayoutTransition.APPEARING, animIn);  </div><div class="line">  </div><div class="line">    <span class="comment">//出场动画:view显示时的动画  </span></div><div class="line">    ObjectAnimator animOut = ObjectAnimator.ofFloat(<span class="keyword">null</span>, <span class="string">"rotation"</span>, <span class="number">0f</span>, <span class="number">90f</span>, <span class="number">0f</span>);  </div><div class="line">    mTransitioner.setAnimator(LayoutTransition.DISAPPEARING, animOut);  </div><div class="line">  </div><div class="line">    PropertyValuesHolder pvhLeft = PropertyValuesHolder.ofInt(<span class="string">"left"</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="number">0</span>);  </div><div class="line">    PropertyValuesHolder pvhTop = PropertyValuesHolder.ofInt(<span class="string">"top"</span>,<span class="number">1</span>,<span class="number">1</span>);  </div><div class="line">    Animator changeAppearAnimator  </div><div class="line">            = ObjectAnimator.ofPropertyValuesHolder(layoutTransitionGroup, pvhLeft,pvhBottom,pvhTop,pvhRight);  </div><div class="line">    mTransitioner.setAnimator(LayoutTransition.CHANGE_APPEARING,changeAppearAnimator);  </div><div class="line">  </div><div class="line">    layoutTransitionGroup.setLayoutTransition(mTransitioner);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注意</strong>  </p>
<ul>
<li>LayoutTransition.CHANGE_APPEARING和LayoutTransition.CHANGE_DISAPPEARING必须使用PropertyValuesHolder所构造的动画才会有效果，不然无效！也就是说使用ObjectAnimator构造的动画，在这里是不会有效果的！ </li>
<li>在构造PropertyValuesHolder动画时，”left”、”top”属性的变动是必写的。如果不需要变动，则直接写为：</li>
<li>在构造PropertyValuesHolder时，所使用的ofInt,ofFloat中的参数值，第一个值和最后一个值必须相同，不然此属性所对应的的动画将被放弃，在此属性值上将不会有效果；</li>
<li>在构造PropertyValuesHolder时，所使用的ofInt,ofFloat中，如果所有参数值都相同，也将不会有动画效果。 </li>
</ul>
<h1 id="九、实现ListView-Item进入动画"><a href="#九、实现ListView-Item进入动画" class="headerlink" title="九、实现ListView Item进入动画"></a>九、实现ListView Item进入动画</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> List&lt;Drawable&gt; mDrawableList = <span class="keyword">new</span> ArrayList&lt;&gt;();  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mLength = <span class="number">0</span>;  </div><div class="line">    <span class="keyword">private</span> LayoutInflater mInflater;  </div><div class="line">    <span class="keyword">private</span> Context mContext;  </div><div class="line">    <span class="keyword">private</span> ListView mListView;  </div><div class="line">    <span class="keyword">private</span> Animation animation;  </div><div class="line">  </div><div class="line">  	AbsListView.OnScrollListener mOnScrollListener = <span class="keyword">new</span> AbsListView.OnScrollListener() &#123;  </div><div class="line">    	<span class="meta">@Override</span>  </div><div class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollStateChanged</span><span class="params">(AbsListView view, <span class="keyword">int</span> scrollState)</span> </span>&#123;  </div><div class="line">  </div><div class="line">    	&#125;  </div><div class="line">  </div><div class="line">    	<span class="meta">@Override</span>  </div><div class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScroll</span><span class="params">(AbsListView view, <span class="keyword">int</span> firstVisibleItem, <span class="keyword">int</span> visibleItemCount, <span class="keyword">int</span> totalItemCount)</span> </span>&#123;  </div><div class="line">    		View firstChild = view.getChildAt(<span class="number">0</span>);  </div><div class="line">        	<span class="keyword">if</span> (firstChild == <span class="keyword">null</span>) <span class="keyword">return</span>;  </div><div class="line">        	<span class="keyword">int</span> top = firstChild.getTop();  </div><div class="line">        	<span class="comment">/** </span></div><div class="line">         	 * firstVisibleItem &gt; mFirstPosition表示向下滑动一整个Item </div><div class="line">         	 * mFirstTop &gt; top表示在当前这个item中滑动 </div><div class="line">         	 */  </div><div class="line">        	isScrollDown = firstVisibleItem &gt; mFirstPosition || mFirstTop &gt; top;  </div><div class="line">        	mFirstTop = top;  </div><div class="line">        	mFirstPosition = firstVisibleItem; </div><div class="line">    	&#125;  </div><div class="line">	&#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ListAdapter</span><span class="params">(Context context, ListView listView, List&lt;Drawable&gt; drawables, <span class="keyword">int</span> length)</span> </span>&#123;  </div><div class="line">        mDrawableList.addAll(drawables);  </div><div class="line">        mLength = length;  </div><div class="line">        mInflater = LayoutInflater.from(context);  </div><div class="line">        mContext = context;  </div><div class="line">        mListView = listView;  </div><div class="line">        animation = AnimationUtils.loadAnimation(mContext,R.anim.bottom_in_anim);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> mLength;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> mDrawableList.get(position % mDrawableList.size());  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;  </div><div class="line">        <span class="keyword">return</span> position;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;  </div><div class="line">        ViewHolder holder = <span class="keyword">null</span>;  </div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (convertView == <span class="keyword">null</span>) &#123;  </div><div class="line">  </div><div class="line">            holder = <span class="keyword">new</span> ViewHolder();  </div><div class="line">            convertView = mInflater.inflate(R.layout.item_layout, <span class="keyword">null</span>);  </div><div class="line">            holder.mImageView = (ImageView) convertView.findViewById(R.id.img);  </div><div class="line">            holder.mTextView = (TextView) convertView.findViewById(R.id.text);  </div><div class="line">        &#125; <span class="keyword">else</span> &#123;  </div><div class="line">            holder = (ViewHolder) convertView.getTag();  </div><div class="line">        &#125; </div><div class="line">        <span class="comment">//清除当前显示区域中所有item的动画  </span></div><div class="line">    	 <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mListView.getChildCount();i++)&#123;  </div><div class="line">        	View view = mListView.getChildAt(i);  </div><div class="line">        	view.clearAnimation();  </div><div class="line">    	 &#125; </div><div class="line">        <span class="keyword">if</span> (isScrollDown) &#123;  </div><div class="line">       	convertView.startAnimation(animation);  </div><div class="line">   		 &#125;  </div><div class="line">        convertView.setTag(holder);  </div><div class="line">  </div><div class="line">        holder.mImageView.setImageDrawable(mDrawableList.get(position % mDrawableList.size()));  </div><div class="line">        holder.mTextView.setText(position+<span class="string">""</span>);  </div><div class="line">  </div><div class="line">        <span class="keyword">return</span> convertView;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> </span>&#123;  </div><div class="line">        <span class="keyword">public</span> ImageView mImageView;  </div><div class="line">        <span class="keyword">public</span> TextView mTextView;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>摘记自<a href="http://blog.csdn.net/harvic880925/article/details/50995268" target="_blank" rel="external">Android自定义控件三部曲文章索引</a></strong></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/11/10/android-popupwindow/" rel="next" title="PopUpWindow使用详解">
                <i class="fa fa-chevron-left"></i> PopUpWindow使用详解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/01/11/android-draw/" rel="prev" title="Android自定义控件——绘图">
                Android自定义控件——绘图 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://ohtrrgyyd.bkt.clouddn.com/037c5bde749f737e107c8fb8e9321c9d.jpg"
               alt="MagicalRice" />
          <p class="site-author-name" itemprop="name">MagicalRice</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">140</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">27</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/adolphJane" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、alpha、scale、translate、rotate、set-Tween-Animation-的xml属性及用法"><span class="nav-number">2.</span> <span class="nav-text">一、alpha、scale、translate、rotate、set(Tween Animation)的xml属性及用法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、概述"><span class="nav-number">2.0.1.</span> <span class="nav-text">一、概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、scale标签——调节尺寸"><span class="nav-number">2.0.2.</span> <span class="nav-text">二、scale标签——调节尺寸</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、自身属性"><span class="nav-number">2.0.2.0.1.</span> <span class="nav-text">1、自身属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、从Animation类继承的属性"><span class="nav-number">2.0.2.0.2.</span> <span class="nav-text">2、从Animation类继承的属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、alpha标签——调节透明度"><span class="nav-number">2.0.3.</span> <span class="nav-text">三、alpha标签——调节透明度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、自身属性-1"><span class="nav-number">2.0.3.0.1.</span> <span class="nav-text">1、自身属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、rotate标签——旋转"><span class="nav-number">2.0.4.</span> <span class="nav-text">四、rotate标签——旋转</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、自身属性-2"><span class="nav-number">2.0.4.0.1.</span> <span class="nav-text">1、自身属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、translate标签-——-平移"><span class="nav-number">2.0.5.</span> <span class="nav-text">五、translate标签 —— 平移</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、自身属性-3"><span class="nav-number">2.0.5.0.1.</span> <span class="nav-text">1、自身属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、set标签——定义动作合集"><span class="nav-number">2.0.6.</span> <span class="nav-text">六、set标签——定义动作合集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#七、示例"><span class="nav-number">2.0.7.</span> <span class="nav-text">七、示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#八、使用Animation"><span class="nav-number">2.0.8.</span> <span class="nav-text">八、使用Animation</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、Interpolator插值器"><span class="nav-number">3.</span> <span class="nav-text">二、Interpolator插值器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、概述-1"><span class="nav-number">3.0.1.</span> <span class="nav-text">一、概述</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、用代码实现Animation"><span class="nav-number">4.</span> <span class="nav-text">三、用代码实现Animation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Animation类是所有动画的基类，它所具有的标签对应的函数："><span class="nav-number">4.0.1.</span> <span class="nav-text">1.Animation类是所有动画的基类，它所具有的标签对应的函数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ScaleAnimation"><span class="nav-number">4.0.2.</span> <span class="nav-text">2.ScaleAnimation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数："><span class="nav-number">4.0.2.0.1.</span> <span class="nav-text">构造函数：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例："><span class="nav-number">4.0.2.0.2.</span> <span class="nav-text">示例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-AlphaAnimation"><span class="nav-number">4.0.3.</span> <span class="nav-text">3. AlphaAnimation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数：-1"><span class="nav-number">4.0.3.0.1.</span> <span class="nav-text">构造函数：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例：-1"><span class="nav-number">4.0.3.0.2.</span> <span class="nav-text">示例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-RotateAnimation"><span class="nav-number">4.0.4.</span> <span class="nav-text">4. RotateAnimation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数：-2"><span class="nav-number">4.0.4.0.1.</span> <span class="nav-text">构造函数：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例：-2"><span class="nav-number">4.0.4.0.2.</span> <span class="nav-text">示例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-TranslateAnimation"><span class="nav-number">4.0.5.</span> <span class="nav-text">5. TranslateAnimation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数：-3"><span class="nav-number">4.0.5.0.1.</span> <span class="nav-text">构造函数：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例：-3"><span class="nav-number">4.0.5.0.2.</span> <span class="nav-text">示例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-AnimationSet"><span class="nav-number">4.0.6.</span> <span class="nav-text">6. AnimationSet</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数：-4"><span class="nav-number">4.0.6.0.1.</span> <span class="nav-text">构造函数：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#增加动画函数"><span class="nav-number">4.0.6.0.2.</span> <span class="nav-text">增加动画函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例：-4"><span class="nav-number">4.0.6.0.3.</span> <span class="nav-text">示例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Interpolater插值器"><span class="nav-number">4.0.7.</span> <span class="nav-text">7. Interpolater插值器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、ValueAnimator基本使用"><span class="nav-number">5.</span> <span class="nav-text">四、ValueAnimator基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、概述-2"><span class="nav-number">5.0.1.</span> <span class="nav-text">一、概述</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、为什么要引入Property-Animator-属性动画"><span class="nav-number">5.0.1.0.1.</span> <span class="nav-text">1、为什么要引入Property Animator(属性动画)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、ValueAnimator简单使用"><span class="nav-number">5.0.2.</span> <span class="nav-text">二、ValueAnimator简单使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、初步使用ValueAnimator"><span class="nav-number">5.0.2.0.1.</span> <span class="nav-text">1、初步使用ValueAnimator</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、常用函数"><span class="nav-number">5.0.2.0.2.</span> <span class="nav-text">2、常用函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、监听器"><span class="nav-number">5.0.2.0.3.</span> <span class="nav-text">3、监听器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、其他函数"><span class="nav-number">5.0.2.0.4.</span> <span class="nav-text">4、其他函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5、插值器"><span class="nav-number">5.0.2.0.5.</span> <span class="nav-text">5、插值器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6、自定义插值器"><span class="nav-number">5.0.2.0.6.</span> <span class="nav-text">6、自定义插值器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7、Evaluator"><span class="nav-number">5.0.2.0.7.</span> <span class="nav-text">7、Evaluator</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8、自定义Evaluator"><span class="nav-number">5.0.2.0.8.</span> <span class="nav-text">8、自定义Evaluator</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9、ArgbEvalutor"><span class="nav-number">5.0.2.0.9.</span> <span class="nav-text">9、ArgbEvalutor</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10、ofInt-ofFloat-ofObject"><span class="nav-number">5.0.2.0.10.</span> <span class="nav-text">10、ofInt(),ofFloat(),ofObject()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、ObjectAnimator基础使用"><span class="nav-number">5.0.3.</span> <span class="nav-text">三、ObjectAnimator基础使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#改变透明度示例"><span class="nav-number">5.0.3.0.1.</span> <span class="nav-text">改变透明度示例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数"><span class="nav-number">5.0.3.0.2.</span> <span class="nav-text">构造函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#自定义ObjectAnimator属性"><span class="nav-number">5.0.3.0.3.</span> <span class="nav-text">自定义ObjectAnimator属性</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、PropertyValuesHolder与Keyframe"><span class="nav-number">6.</span> <span class="nav-text">五、PropertyValuesHolder与Keyframe</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、PropertyValuesHolder"><span class="nav-number">6.0.1.</span> <span class="nav-text">1、PropertyValuesHolder</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、概述"><span class="nav-number">6.0.1.1.</span> <span class="nav-text">1、概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、PropertyValuesHolder之ofFloat-、ofInt"><span class="nav-number">6.0.1.2.</span> <span class="nav-text">2、PropertyValuesHolder之ofFloat()、ofInt()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）ofFloat-、ofInt"><span class="nav-number">6.0.1.2.1.</span> <span class="nav-text">（1）ofFloat()、ofInt()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）、ObjectAnimator-ofPropertyValuesHolder"><span class="nav-number">6.0.1.2.2.</span> <span class="nav-text">（2）、ObjectAnimator.ofPropertyValuesHolder()</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、PropertyValuesHolder之ofObject"><span class="nav-number">6.0.1.3.</span> <span class="nav-text">3、PropertyValuesHolder之ofObject()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ofObject的构造函数"><span class="nav-number">6.0.1.3.1.</span> <span class="nav-text">ofObject的构造函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例"><span class="nav-number">6.0.1.3.2.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、Keyframe"><span class="nav-number">6.0.1.4.</span> <span class="nav-text">3、Keyframe</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、概述-1"><span class="nav-number">6.0.1.4.1.</span> <span class="nav-text">1、概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、示例"><span class="nav-number">6.0.1.4.2.</span> <span class="nav-text">2、示例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、常用函数"><span class="nav-number">6.0.1.4.3.</span> <span class="nav-text">3、常用函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PropertyValuesHolder之其它函数"><span class="nav-number">6.0.1.5.</span> <span class="nav-text">PropertyValuesHolder之其它函数</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、联合动画的代码实现"><span class="nav-number">7.</span> <span class="nav-text">六、联合动画的代码实现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、AnimatorSet——playSequentially-playTogether"><span class="nav-number">7.0.1.</span> <span class="nav-text">1、AnimatorSet——playSequentially,playTogether</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、playSequentially"><span class="nav-number">7.0.1.1.</span> <span class="nav-text">1、playSequentially</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#示例-1"><span class="nav-number">7.0.1.1.1.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、playTogether"><span class="nav-number">7.0.1.2.</span> <span class="nav-text">2、playTogether</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#示例-2"><span class="nav-number">7.0.1.2.1.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自由设置动画顺序——AnimatorSet-Builder"><span class="nav-number">7.0.1.3.</span> <span class="nav-text">自由设置动画顺序——AnimatorSet.Builder</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、示例"><span class="nav-number">7.0.1.3.1.</span> <span class="nav-text">1、示例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、AnimatorSet-Builder函数"><span class="nav-number">7.0.1.3.2.</span> <span class="nav-text">2、AnimatorSet.Builder函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、使用示例"><span class="nav-number">7.0.1.3.3.</span> <span class="nav-text">3、使用示例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AnimatorSet监听器"><span class="nav-number">7.0.1.4.</span> <span class="nav-text">AnimatorSet监听器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通用函数逐个设置与AnimatorSet设置的区别"><span class="nav-number">7.0.1.5.</span> <span class="nav-text">通用函数逐个设置与AnimatorSet设置的区别</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、联合动画的XML实现与使用示例"><span class="nav-number">8.</span> <span class="nav-text">七、联合动画的XML实现与使用示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、联合动画的XML实现"><span class="nav-number">8.0.1.</span> <span class="nav-text">1、联合动画的XML实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、animator"><span class="nav-number">8.0.1.1.</span> <span class="nav-text">1、animator</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-下面是完整的animator所有的字段及取值范围："><span class="nav-number">8.0.1.1.1.</span> <span class="nav-text">(1)下面是完整的animator所有的字段及取值范围：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-将xml加载到程序中"><span class="nav-number">8.0.1.1.2.</span> <span class="nav-text">(2)将xml加载到程序中</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、objectAnimator"><span class="nav-number">8.0.1.2.</span> <span class="nav-text">2、objectAnimator</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-字段意义及使用方法"><span class="nav-number">8.0.1.2.1.</span> <span class="nav-text">(1)字段意义及使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-将xml加载到程序中-1"><span class="nav-number">8.0.1.2.2.</span> <span class="nav-text">(2)将xml加载到程序中</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、set"><span class="nav-number">8.0.1.3.</span> <span class="nav-text">3、set</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-字段意义及使用方法-1"><span class="nav-number">8.0.1.3.1.</span> <span class="nav-text">(1)字段意义及使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-将xml加载到程序中-2"><span class="nav-number">8.0.1.3.2.</span> <span class="nav-text">(2)将xml加载到程序中</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、AnimatorSet应用"><span class="nav-number">8.0.2.</span> <span class="nav-text">2、AnimatorSet应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一、LayoutAnimation的xml实现——layoutAnimation标签"><span class="nav-number">8.0.3.</span> <span class="nav-text">一、LayoutAnimation的xml实现——layoutAnimation标签</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、概述-2"><span class="nav-number">8.0.3.1.</span> <span class="nav-text">1、概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、layoutAnimation各字段意义"><span class="nav-number">8.0.3.2.</span> <span class="nav-text">2、layoutAnimation各字段意义</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、LayoutAnimation的代码实现——LayoutAnimationController"><span class="nav-number">8.0.4.</span> <span class="nav-text">二、LayoutAnimation的代码实现——LayoutAnimationController</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、构造函数"><span class="nav-number">8.0.4.1.</span> <span class="nav-text">1、构造函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、基本函数"><span class="nav-number">8.0.4.2.</span> <span class="nav-text">2、基本函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、示例"><span class="nav-number">8.0.4.3.</span> <span class="nav-text">3、示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、GridLayoutAnimation的XML实现——gridLayoutAnimation"><span class="nav-number">8.0.5.</span> <span class="nav-text">三、GridLayoutAnimation的XML实现——gridLayoutAnimation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、标签属性"><span class="nav-number">8.0.5.1.</span> <span class="nav-text">1、标签属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、示例-1"><span class="nav-number">8.0.5.2.</span> <span class="nav-text">2、示例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-、首先是gride-animation-xml"><span class="nav-number">8.0.5.2.1.</span> <span class="nav-text">(1)、首先是gride_animation.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-、程序布局main-xml"><span class="nav-number">8.0.5.2.2.</span> <span class="nav-text">(2)、程序布局main.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-、代码处理"><span class="nav-number">8.0.5.2.3.</span> <span class="nav-text">(3)、代码处理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、GridLayoutAnimation的代码实现——GridLayoutAnimationController"><span class="nav-number">8.0.6.</span> <span class="nav-text">四、GridLayoutAnimation的代码实现——GridLayoutAnimationController</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、构造函数-1"><span class="nav-number">8.0.6.1.</span> <span class="nav-text">1、构造函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、其他方法"><span class="nav-number">8.0.6.2.</span> <span class="nav-text">2、其他方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、示例-1"><span class="nav-number">8.0.6.3.</span> <span class="nav-text">3、示例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#八、animateLayoutChanges与LayoutTransition"><span class="nav-number">9.</span> <span class="nav-text">八、animateLayoutChanges与LayoutTransition</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、android-animateLayoutChanges属性"><span class="nav-number">9.0.1.</span> <span class="nav-text">一、android:animateLayoutChanges属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、简单示例"><span class="nav-number">9.0.1.1.</span> <span class="nav-text">1、简单示例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、main-xml布局代码"><span class="nav-number">9.0.1.1.1.</span> <span class="nav-text">1、main.xml布局代码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、MyActivity代码"><span class="nav-number">9.0.1.1.2.</span> <span class="nav-text">2、MyActivity代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、LayoutTransaction"><span class="nav-number">9.0.2.</span> <span class="nav-text">二、LayoutTransaction</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、概述-3"><span class="nav-number">9.0.2.1.</span> <span class="nav-text">1、概述</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#第一步：创建实例"><span class="nav-number">9.0.2.1.1.</span> <span class="nav-text">第一步：创建实例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#第二步：创建动画并设置"><span class="nav-number">9.0.2.1.2.</span> <span class="nav-text">第二步：创建动画并设置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#第三步：将LayoutTransaction设置进ViewGroup"><span class="nav-number">9.0.2.1.3.</span> <span class="nav-text">第三步：将LayoutTransaction设置进ViewGroup</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、LayoutTransition-CHANGE-APPEARING与LayoutTransition-CHANGE-DISAPPEARING"><span class="nav-number">9.0.2.2.</span> <span class="nav-text">2、LayoutTransition.CHANGE_APPEARING与LayoutTransition.CHANGE_DISAPPEARING</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#LayoutTransition-CHANGE-APPEARING实现"><span class="nav-number">9.0.2.2.1.</span> <span class="nav-text">LayoutTransition.CHANGE_APPEARING实现</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#九、实现ListView-Item进入动画"><span class="nav-number">10.</span> <span class="nav-text">九、实现ListView Item进入动画</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MagicalRice</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>


        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  


  <script type="text/javascript" src="/js/src/particle.js" count="50" zindex="-2" opacity="1" color="0,104,183"></script>
</body>
</html>
